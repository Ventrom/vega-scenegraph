{"version":3,"file":"vega-scenegraph.min.js","sources":["../src/Gradient.js","../src/path/curves.js","../src/path/parse.js","../src/util/constants.js","../src/path/arc.js","../src/path/render.js","../src/path/symbols.js","../src/path/rectangle.js","../src/path/trail.js","../src/path/shapes.js","../src/util/svg/clip.js","../src/Bounds.js","../src/Item.js","../src/GroupItem.js","../src/ResourceLoader.js","../src/bound/boundStroke.js","../src/bound/boundContext.js","../src/util/canvas/context.js","../src/util/intersect.js","../src/util/canvas/blend.js","../src/util/value.js","../src/util/canvas/gradient.js","../src/util/canvas/color.js","../src/util/canvas/fill.js","../src/util/canvas/stroke.js","../src/util/visit.js","../src/util/canvas/draw.js","../src/util/canvas/pick.js","../src/util/svg/transform.js","../src/marks/markItemPath.js","../src/marks/arc.js","../src/marks/markMultiItemPath.js","../src/marks/area.js","../src/util/pickPath.js","../src/util/canvas/clip.js","../src/marks/group.js","../src/util/svg/metadata.js","../src/marks/image.js","../src/marks/line.js","../src/marks/path.js","../src/marks/rect.js","../src/marks/rule.js","../src/marks/shape.js","../src/marks/symbol.js","../src/util/text.js","../src/marks/text.js","../src/marks/trail.js","../src/marks/index.js","../src/bound/boundItem.js","../src/bound/boundMark.js","../src/util/serialize.js","../src/Scenegraph.js","../src/util/dom.js","../src/util/point.js","../src/Handler.js","../src/Renderer.js","../src/util/resolveItem.js","../src/util/events.js","../src/CanvasHandler.js","../src/util/canvas/resize.js","../src/CanvasRenderer.js","../src/SVGHandler.js","../src/util/aria.js","../src/util/markup.js","../src/util/svg/styles.js","../src/SVGRenderer.js","../src/SVGStringRenderer.js","../src/modules.js","../src/intersect.js","../src/bound/boundClip.js","../src/util/equal.js","../index.js"],"sourcesContent":["let gradient_id = 0;\n\nexport function resetSVGGradientId() {\n  gradient_id = 0;\n}\n\nexport const patternPrefix = 'p_';\n\nexport function isGradient(value) {\n  return value && value.gradient;\n}\n\nexport function gradientRef(g, defs, base) {\n  const type = g.gradient;\n\n  let id = g.id,\n      prefix = type === 'radial' ? patternPrefix : '';\n\n  // check id, assign default values as needed\n  if (!id) {\n    id = g.id = 'gradient_' + (gradient_id++);\n    if (type === 'radial') {\n      g.x1 = get(g.x1, 0.5);\n      g.y1 = get(g.y1, 0.5);\n      g.r1 = get(g.r1, 0);\n      g.x2 = get(g.x2, 0.5);\n      g.y2 = get(g.y2, 0.5);\n      g.r2 = get(g.r2, 0.5);\n      prefix = patternPrefix;\n    } else {\n      g.x1 = get(g.x1, 0);\n      g.y1 = get(g.y1, 0);\n      g.x2 = get(g.x2, 1);\n      g.y2 = get(g.y2, 0);\n    }\n  }\n\n  // register definition\n  defs[id] = g;\n\n  // return url reference\n  return 'url(' + (base || '') + '#' + prefix + id + ')';\n}\n\nfunction get(val, def) {\n  return val != null ? val : def;\n}\n\nexport default function(p0, p1) {\n  var stops = [], gradient;\n  return gradient = {\n    gradient: 'linear',\n    x1: p0 ? p0[0] : 0,\n    y1: p0 ? p0[1] : 0,\n    x2: p1 ? p1[0] : 1,\n    y2: p1 ? p1[1] : 0,\n    stops: stops,\n    stop: function(offset, color) {\n      stops.push({offset: offset, color: color});\n      return gradient;\n    }\n  };\n}\n","import {hasOwnProperty} from 'vega-util';\n\nimport {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBundle,\n  curveCardinal,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCatmullRom,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore\n} from 'd3-shape';\n\nconst lookup = {\n  'basis': {\n    curve: curveBasis\n  },\n  'basis-closed': {\n    curve: curveBasisClosed\n  },\n  'basis-open': {\n    curve: curveBasisOpen\n  },\n  'bundle': {\n    curve: curveBundle,\n    tension: 'beta',\n    value: 0.85\n  },\n  'cardinal': {\n    curve: curveCardinal,\n    tension: 'tension',\n    value: 0\n  },\n  'cardinal-open': {\n    curve: curveCardinalOpen,\n    tension: 'tension',\n    value: 0\n  },\n  'cardinal-closed': {\n    curve: curveCardinalClosed,\n    tension: 'tension',\n    value: 0\n  },\n  'catmull-rom': {\n    curve: curveCatmullRom,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'catmull-rom-closed': {\n    curve: curveCatmullRomClosed,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'catmull-rom-open': {\n    curve: curveCatmullRomOpen,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'linear': {\n    curve: curveLinear\n  },\n  'linear-closed': {\n    curve: curveLinearClosed\n  },\n  'monotone': {\n    horizontal: curveMonotoneY,\n    vertical:   curveMonotoneX\n  },\n  'natural': {\n    curve: curveNatural\n  },\n  'step': {\n    curve: curveStep\n  },\n  'step-after': {\n    curve: curveStepAfter\n  },\n  'step-before': {\n    curve: curveStepBefore\n  }\n};\n\nexport default function curves(type, orientation, tension) {\n  var entry = hasOwnProperty(lookup, type) && lookup[type],\n      curve = null;\n\n  if (entry) {\n    curve = entry.curve || entry[orientation || 'vertical'];\n    if (entry.tension && tension != null) {\n      curve = curve[entry.tension](tension);\n    }\n  }\n\n  return curve;\n}\n","const paramCounts = { m:2, l:2, h:1, v:1, z:0, c:6, s:4, q:4, t:2, a:7 };\nconst commandPattern = /[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi;\nconst numberPattern = /^[+-]?(([0-9]*\\.[0-9]+)|([0-9]+\\.)|([0-9]+))([eE][+-]?[0-9]+)?/;\nconst spacePattern = /^((\\s+,?\\s*)|(,\\s*))/;\nconst flagPattern = /^[01]/;\n\nexport default function parse(path) {\n  const commands = [];\n  const matches = path.match(commandPattern) || [];\n\n  matches.forEach(str => {\n    let cmd = str[0];\n    const type = cmd.toLowerCase();\n\n    // parse parameters\n    const paramCount = paramCounts[type];\n    const params = parseParams(type, paramCount, str.slice(1).trim());\n    const count = params.length;\n\n    // error checking based on parameter count\n    if (count < paramCount || (count && count % paramCount !== 0)) {\n      throw Error('Invalid SVG path, incorrect parameter count');\n    }\n\n    // register the command\n    commands.push([cmd, ...params.slice(0, paramCount)]);\n\n    // exit now if we're done, also handles zero-param 'z'\n    if (count === paramCount) {\n      return;\n    }\n\n    // handle implicit line-to\n    if (type === 'm') {\n      cmd = (cmd === 'M') ? 'L' : 'l';\n    }\n\n    // repeat command when given extended param list\n    for (let i = paramCount; i < count; i += paramCount) {\n      commands.push([cmd, ...params.slice(i, i + paramCount)]);\n    }\n  });\n\n  return commands;\n}\n\nfunction parseParams(type, paramCount, segment) {\n  const params = [];\n\n  for (let index = 0; paramCount && index < segment.length; ) {\n    for (let i = 0; i < paramCount; ++i) {\n      const pattern = type === 'a' && (i === 3 || i === 4) ? flagPattern : numberPattern;\n      const match = segment.slice(index).match(pattern);\n\n      if (match === null) {\n        throw Error('Invalid SVG path, incorrect parameter type');\n      }\n\n      index += match[0].length;\n      params.push(+match[0]);\n\n      const ws = segment.slice(index).match(spacePattern);\n      if (ws !== null) {\n        index += ws[0].length;\n      }\n    }\n  }\n\n  return params;\n}\n","export const DegToRad = Math.PI / 180;\nexport const Epsilon = 1e-14;\nexport const HalfPi = Math.PI / 2;\nexport const Tau = Math.PI * 2;\nexport const HalfSqrt3 = Math.sqrt(3) / 2;\n","import {DegToRad, HalfPi, Tau} from '../util/constants';\n\nexport var segmentCache = {};\nexport var bezierCache = {};\n\nvar join = [].join;\n\n// Copied from Inkscape svgtopdf, thanks!\nexport function segments(x, y, rx, ry, large, sweep, rotateX, ox, oy) {\n  const key = join.call(arguments);\n  if (segmentCache[key]) {\n    return segmentCache[key];\n  }\n\n  const th = rotateX * DegToRad;\n  const sin_th = Math.sin(th);\n  const cos_th = Math.cos(th);\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const px = cos_th * (ox - x) * 0.5 + sin_th * (oy - y) * 0.5;\n  const py = cos_th * (oy - y) * 0.5 - sin_th * (ox - x) * 0.5;\n  let pl = (px*px) / (rx*rx) + (py*py) / (ry*ry);\n  if (pl > 1) {\n    pl = Math.sqrt(pl);\n    rx *= pl;\n    ry *= pl;\n  }\n\n  const a00 = cos_th / rx;\n  const a01 = sin_th / rx;\n  const a10 = (-sin_th) / ry;\n  const a11 = (cos_th) / ry;\n  const x0 = a00 * ox + a01 * oy;\n  const y0 = a10 * ox + a11 * oy;\n  const x1 = a00 * x + a01 * y;\n  const y1 = a10 * x + a11 * y;\n\n  const d = (x1-x0) * (x1-x0) + (y1-y0) * (y1-y0);\n  let sfactor_sq = 1 / d - 0.25;\n  if (sfactor_sq < 0) sfactor_sq = 0;\n  let sfactor = Math.sqrt(sfactor_sq);\n  if (sweep == large) sfactor = -sfactor;\n  const xc = 0.5 * (x0 + x1) - sfactor * (y1-y0);\n  const yc = 0.5 * (y0 + y1) + sfactor * (x1-x0);\n\n  const th0 = Math.atan2(y0-yc, x0-xc);\n  const th1 = Math.atan2(y1-yc, x1-xc);\n\n  let th_arc = th1-th0;\n  if (th_arc < 0 && sweep === 1) {\n    th_arc += Tau;\n  } else if (th_arc > 0 && sweep === 0) {\n    th_arc -= Tau;\n  }\n\n  const segs = Math.ceil(Math.abs(th_arc / (HalfPi + 0.001)));\n  const result = [];\n  for (let i=0; i<segs; ++i) {\n    const th2 = th0 + i * th_arc / segs;\n    const th3 = th0 + (i+1) * th_arc / segs;\n    result[i] = [xc, yc, th2, th3, rx, ry, sin_th, cos_th];\n  }\n\n  return (segmentCache[key] = result);\n}\n\nexport function bezier(params) {\n  const key = join.call(params);\n  if (bezierCache[key]) {\n    return bezierCache[key];\n  }\n\n  var cx = params[0],\n      cy = params[1],\n      th0 = params[2],\n      th1 = params[3],\n      rx = params[4],\n      ry = params[5],\n      sin_th = params[6],\n      cos_th = params[7];\n\n  const a00 = cos_th * rx;\n  const a01 = -sin_th * ry;\n  const a10 = sin_th * rx;\n  const a11 = cos_th * ry;\n\n  const cos_th0 = Math.cos(th0);\n  const sin_th0 = Math.sin(th0);\n  const cos_th1 = Math.cos(th1);\n  const sin_th1 = Math.sin(th1);\n\n  const th_half = 0.5 * (th1 - th0);\n  const sin_th_h2 = Math.sin(th_half * 0.5);\n  const t = (8/3) * sin_th_h2 * sin_th_h2 / Math.sin(th_half);\n  const x1 = cx + cos_th0 - t * sin_th0;\n  const y1 = cy + sin_th0 + t * cos_th0;\n  const x3 = cx + cos_th1;\n  const y3 = cy + sin_th1;\n  const x2 = x3 + t * sin_th1;\n  const y2 = y3 - t * cos_th1;\n\n  return (bezierCache[key] = [\n    a00 * x1 + a01 * y1,  a10 * x1 + a11 * y1,\n    a00 * x2 + a01 * y2,  a10 * x2 + a11 * y2,\n    a00 * x3 + a01 * y3,  a10 * x3 + a11 * y3\n  ]);\n}\n","import {bezier, segments} from './arc';\n\nconst temp = ['l', 0, 0, 0, 0, 0, 0, 0];\n\nfunction scale(current, sX, sY) {\n  const c = (temp[0] = current[0]);\n  if (c === 'a' || c === 'A') {\n    temp[1] = sX * current[1];\n    temp[2] = sY * current[2];\n    temp[3] = current[3];\n    temp[4] = current[4];\n    temp[5] = current[5];\n    temp[6] = sX * current[6];\n    temp[7] = sY * current[7];\n  } else if (c === 'h' || c === 'H') {\n    temp[1] = sX * current[1];\n  } else if (c === 'v' || c === 'V') {\n    temp[1] = sY * current[1];\n  } else {\n    for (var i=1, n=current.length; i<n; ++i) {\n      temp[i] = (i % 2 == 1 ? sX : sY) * current[i];\n    }\n  }\n  return temp;\n}\n\nexport default function(context, path, l, t, sX, sY) {\n  var current, // current instruction\n      previous = null,\n      x = 0, // current x\n      y = 0, // current y\n      controlX = 0, // current control point x\n      controlY = 0, // current control point y\n      tempX,\n      tempY,\n      tempControlX,\n      tempControlY,\n      anchorX = 0,\n      anchorY = 0;\n\n  if (l == null) l = 0;\n  if (t == null) t = 0;\n  if (sX == null) sX = 1;\n  if (sY == null) sY = sX;\n\n  if (context.beginPath) context.beginPath();\n\n  for (var i=0, len=path.length; i<len; ++i) {\n    current = path[i];\n    if (sX !== 1 || sY !== 1) {\n      current = scale(current, sX, sY);\n    }\n\n    switch (current[0]) { // first letter\n\n      case 'l': // lineto, relative\n        x += current[1];\n        y += current[2];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'L': // lineto, absolute\n        x = current[1];\n        y = current[2];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'h': // horizontal lineto, relative\n        x += current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'H': // horizontal lineto, absolute\n        x = current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'v': // vertical lineto, relative\n        y += current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'V': // verical lineto, absolute\n        y = current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'm': // moveTo, relative\n        x += current[1];\n        y += current[2];\n        anchorX = x;\n        anchorY = y;\n        context.moveTo(x + l, y + t);\n        break;\n\n      case 'M': // moveTo, absolute\n        x = current[1];\n        y = current[2];\n        anchorX = x;\n        anchorY = y;\n        context.moveTo(x + l, y + t);\n        break;\n\n      case 'c': // bezierCurveTo, relative\n        tempX = x + current[5];\n        tempY = y + current[6];\n        controlX = x + current[3];\n        controlY = y + current[4];\n        context.bezierCurveTo(\n          x + current[1] + l, // x1\n          y + current[2] + t, // y1\n          controlX + l, // x2\n          controlY + t, // y2\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'C': // bezierCurveTo, absolute\n        x = current[5];\n        y = current[6];\n        controlX = current[3];\n        controlY = current[4];\n        context.bezierCurveTo(\n          current[1] + l,\n          current[2] + t,\n          controlX + l,\n          controlY + t,\n          x + l,\n          y + t\n        );\n        break;\n\n      case 's': // shorthand cubic bezierCurveTo, relative\n        // transform to absolute x,y\n        tempX = x + current[3];\n        tempY = y + current[4];\n        // calculate reflection of previous control points\n        controlX = 2 * x - controlX;\n        controlY = 2 * y - controlY;\n        context.bezierCurveTo(\n          controlX + l,\n          controlY + t,\n          x + current[1] + l,\n          y + current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n\n        // set control point to 2nd one of this command\n        // the first control point is assumed to be the reflection of\n        // the second control point on the previous command relative\n        // to the current point.\n        controlX = x + current[1];\n        controlY = y + current[2];\n\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'S': // shorthand cubic bezierCurveTo, absolute\n        tempX = current[3];\n        tempY = current[4];\n        // calculate reflection of previous control points\n        controlX = 2*x - controlX;\n        controlY = 2*y - controlY;\n        context.bezierCurveTo(\n          controlX + l,\n          controlY + t,\n          current[1] + l,\n          current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        // set control point to 2nd one of this command\n        // the first control point is assumed to be the reflection of\n        // the second control point on the previous command relative\n        // to the current point.\n        controlX = current[1];\n        controlY = current[2];\n\n        break;\n\n      case 'q': // quadraticCurveTo, relative\n        // transform to absolute x,y\n        tempX = x + current[3];\n        tempY = y + current[4];\n\n        controlX = x + current[1];\n        controlY = y + current[2];\n\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'Q': // quadraticCurveTo, absolute\n        tempX = current[3];\n        tempY = current[4];\n\n        context.quadraticCurveTo(\n          current[1] + l,\n          current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        controlX = current[1];\n        controlY = current[2];\n        break;\n\n      case 't': // shorthand quadraticCurveTo, relative\n\n        // transform to absolute x,y\n        tempX = x + current[1];\n        tempY = y + current[2];\n\n        if (previous[0].match(/[QqTt]/) === null) {\n          // If there is no previous command or if the previous command was not a Q, q, T or t,\n          // assume the control point is coincident with the current point\n          controlX = x;\n          controlY = y;\n        }\n        else if (previous[0] === 't') {\n          // calculate reflection of previous control points for t\n          controlX = 2 * x - tempControlX;\n          controlY = 2 * y - tempControlY;\n        }\n        else if (previous[0] === 'q') {\n          // calculate reflection of previous control points for q\n          controlX = 2 * x - controlX;\n          controlY = 2 * y - controlY;\n        }\n\n        tempControlX = controlX;\n        tempControlY = controlY;\n\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        controlX = x + current[1];\n        controlY = y + current[2];\n        break;\n\n      case 'T':\n        tempX = current[1];\n        tempY = current[2];\n\n        // calculate reflection of previous control points\n        controlX = 2 * x - controlX;\n        controlY = 2 * y - controlY;\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'a':\n        drawArc(context, x + l, y + t, [\n          current[1],\n          current[2],\n          current[3],\n          current[4],\n          current[5],\n          current[6] + x + l,\n          current[7] + y + t\n        ]);\n        x += current[6];\n        y += current[7];\n        break;\n\n      case 'A':\n        drawArc(context, x + l, y + t, [\n          current[1],\n          current[2],\n          current[3],\n          current[4],\n          current[5],\n          current[6] + l,\n          current[7] + t\n        ]);\n        x = current[6];\n        y = current[7];\n        break;\n\n      case 'z':\n      case 'Z':\n        x = anchorX;\n        y = anchorY;\n        context.closePath();\n        break;\n    }\n    previous = current;\n  }\n}\n\nfunction drawArc(context, x, y, coords) {\n  const seg = segments(\n    coords[5], // end x\n    coords[6], // end y\n    coords[0], // radius x\n    coords[1], // radius y\n    coords[3], // large flag\n    coords[4], // sweep flag\n    coords[2], // rotation\n    x, y\n  );\n  for (let i=0; i<seg.length; ++i) {\n    const bez = bezier(seg[i]);\n    context.bezierCurveTo(bez[0], bez[1], bez[2], bez[3], bez[4], bez[5]);\n  }\n}\n","import pathParse from './parse';\nimport pathRender from './render';\nimport {HalfSqrt3, Tau} from '../util/constants';\nimport {hasOwnProperty} from 'vega-util';\n\nconst Tan30 = 0.5773502691896257;\n\nconst builtins = {\n  'circle': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(r, 0);\n      context.arc(0, 0, r, 0, Tau);\n    }\n  },\n  'cross': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          s = r / 2.5;\n      context.moveTo(-r, -s);\n      context.lineTo(-r, s);\n      context.lineTo(-s, s);\n      context.lineTo(-s, r);\n      context.lineTo(s, r);\n      context.lineTo(s, s);\n      context.lineTo(r, s);\n      context.lineTo(r, -s);\n      context.lineTo(s, -s);\n      context.lineTo(s, -r);\n      context.lineTo(-s, -r);\n      context.lineTo(-s, -s);\n      context.closePath();\n    }\n  },\n  'diamond': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(-r, 0);\n      context.lineTo(0, -r);\n      context.lineTo(r, 0);\n      context.lineTo(0, r);\n      context.closePath();\n    }\n  },\n  'square': {\n    draw: function(context, size) {\n      var w = Math.sqrt(size),\n          x = -w / 2;\n      context.rect(x, x, w, w);\n    }\n  },\n  'arrow': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          s = r / 7,\n          t = r / 2.5,\n          v = r / 8;\n      context.moveTo(-s, r);\n      context.lineTo(s, r);\n      context.lineTo(s, -v);\n      context.lineTo(t, -v);\n      context.lineTo(0, -r);\n      context.lineTo(-t, -v);\n      context.lineTo(-s, -v);\n      context.closePath();\n    }\n  },\n  'wedge': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r,\n          o = (h - r * Tan30),\n          b = r / 4;\n      context.moveTo(0, -h - o);\n      context.lineTo(-b, h - o);\n      context.lineTo(b, h - o);\n      context.closePath();\n    }\n  },\n  'triangle': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r,\n          o = (h - r * Tan30);\n      context.moveTo(0, -h - o);\n      context.lineTo(-r, h - o);\n      context.lineTo(r, h - o);\n      context.closePath();\n    }\n  },\n  'triangle-up': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(0, -h);\n      context.lineTo(-r, h);\n      context.lineTo(r, h);\n      context.closePath();\n    }\n  },\n  'triangle-down': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(0, h);\n      context.lineTo(-r, -h);\n      context.lineTo(r, -h);\n      context.closePath();\n    }\n  },\n  'triangle-right': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(h, 0);\n      context.lineTo(-h, -r);\n      context.lineTo(-h, r);\n      context.closePath();\n    }\n  },\n  'triangle-left': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(-h, 0);\n      context.lineTo(h, -r);\n      context.lineTo(h, r);\n      context.closePath();\n    }\n  },\n  'stroke': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(-r, 0);\n      context.lineTo(r, 0);\n    }\n  }\n};\n\nexport default function symbols(_) {\n  return hasOwnProperty(builtins, _) ? builtins[_] : customSymbol(_);\n}\n\nvar custom = {};\n\nfunction customSymbol(path) {\n  if (!hasOwnProperty(custom, path)) {\n    const parsed = pathParse(path);\n    custom[path] = {\n      draw: function(context, size) {\n        pathRender(context, parsed, 0, 0, Math.sqrt(size) / 2);\n      }\n    };\n  }\n  return custom[path];\n}\n","import {path} from 'd3-path';\n\n// See http://spencermortensen.com/articles/bezier-circle/\nconst C = 0.448084975506; // C = 1 - c\n\nfunction rectangleX(d) {\n  return d.x;\n}\n\nfunction rectangleY(d) {\n  return d.y;\n}\n\nfunction rectangleWidth(d) {\n  return d.width;\n}\n\nfunction rectangleHeight(d) {\n  return d.height;\n}\n\nfunction number(_) {\n  return typeof _ === 'function' ? _ : () => +_;\n}\n\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\n\nexport default function() {\n  var x = rectangleX,\n      y = rectangleY,\n      width = rectangleWidth,\n      height = rectangleHeight,\n      crTL = number(0),\n      crTR = crTL,\n      crBL = crTL,\n      crBR = crTL,\n      context = null;\n\n  function rectangle(_, x0, y0) {\n    var buffer,\n        x1 = x0 != null ? x0 : +x.call(this, _),\n        y1 = y0 != null ? y0 : +y.call(this, _),\n        w  = +width.call(this, _),\n        h  = +height.call(this, _),\n        s  = Math.min(w, h) / 2,\n        tl = clamp(+crTL.call(this, _), 0, s),\n        tr = clamp(+crTR.call(this, _), 0, s),\n        bl = clamp(+crBL.call(this, _), 0, s),\n        br = clamp(+crBR.call(this, _), 0, s);\n\n    if (!context) context = buffer = path();\n\n    if (tl <= 0 && tr <= 0 && bl <= 0 && br <= 0) {\n      context.rect(x1, y1, w, h);\n    } else {\n      var x2 = x1 + w,\n          y2 = y1 + h;\n      context.moveTo(x1 + tl, y1);\n      context.lineTo(x2 - tr, y1);\n      context.bezierCurveTo(x2 - C * tr, y1, x2, y1 + C * tr, x2, y1 + tr);\n      context.lineTo(x2, y2 - br);\n      context.bezierCurveTo(x2, y2 - C * br, x2 - C * br, y2, x2 - br, y2);\n      context.lineTo(x1 + bl, y2);\n      context.bezierCurveTo(x1 + C * bl, y2, x1, y2 - C * bl, x1, y2 - bl);\n      context.lineTo(x1, y1 + tl);\n      context.bezierCurveTo(x1, y1 + C * tl, x1 + C * tl, y1, x1 + tl, y1);\n      context.closePath();\n    }\n\n    if (buffer) {\n      context = null;\n      return buffer + '' || null;\n    }\n  }\n\n  rectangle.x = function(_) {\n    if (arguments.length) {\n      x = number(_);\n      return rectangle;\n    } else {\n      return x;\n    }\n  };\n\n  rectangle.y = function(_) {\n    if (arguments.length) {\n      y = number(_);\n      return rectangle;\n    } else {\n      return y;\n    }\n  };\n\n  rectangle.width = function(_) {\n    if (arguments.length) {\n      width = number(_);\n      return rectangle;\n    } else {\n      return width;\n    }\n  };\n\n  rectangle.height = function(_) {\n    if (arguments.length) {\n      height = number(_);\n      return rectangle;\n    } else {\n      return height;\n    }\n  };\n\n  rectangle.cornerRadius = function(tl, tr, br, bl) {\n    if (arguments.length) {\n      crTL = number(tl);\n      crTR = tr != null ? number(tr) : crTL;\n      crBR = br != null ? number(br) : crTL;\n      crBL = bl != null ? number(bl) : crTR;\n      return rectangle;\n    } else {\n      return crTL;\n    }\n  };\n\n  rectangle.context = function(_) {\n    if (arguments.length) {\n      context = _ == null ? null : _;\n      return rectangle;\n    } else {\n      return context;\n    }\n  };\n\n  return rectangle;\n}\n","import {Tau} from '../util/constants';\nimport {path} from 'd3-path';\n\nexport default function() {\n  var x,\n      y,\n      size,\n      defined,\n      context = null,\n      ready, x1, y1, r1;\n\n  function point(x2, y2, w2) {\n    const r2 = w2 / 2;\n\n    if (ready) {\n      var ux = y1 - y2,\n          uy = x2 - x1;\n\n      if (ux || uy) {\n        // get normal vector\n        var ud = Math.sqrt(ux * ux + uy * uy),\n            rx = (ux /= ud) * r1,\n            ry = (uy /= ud) * r1,\n            t = Math.atan2(uy, ux);\n\n        // draw segment\n        context.moveTo(x1 - rx, y1 - ry);\n        context.lineTo(x2 - ux * r2, y2 - uy * r2);\n        context.arc(x2, y2, r2, t - Math.PI, t);\n        context.lineTo(x1 + rx, y1 + ry);\n        context.arc(x1, y1, r1, t, t + Math.PI);\n      } else {\n        context.arc(x2, y2, r2, 0, Tau);\n      }\n      context.closePath();\n    } else {\n      ready = 1;\n    }\n    x1 = x2;\n    y1 = y2;\n    r1 = r2;\n  }\n\n  function trail(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) context = buffer = path();\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) ready = 0;\n      }\n      if (defined0) point(+x(d, i, data), +y(d, i, data), +size(d, i, data));\n    }\n\n    if (buffer) {\n      context = null;\n      return buffer + '' || null;\n    }\n  }\n\n  trail.x = function(_) {\n    if (arguments.length) {\n      x = _;\n      return trail;\n    } else {\n      return x;\n    }\n  };\n\n  trail.y = function(_) {\n    if (arguments.length) {\n      y = _;\n      return trail;\n    } else {\n      return y;\n    }\n  };\n\n  trail.size = function(_) {\n    if (arguments.length) {\n      size = _;\n      return trail;\n    } else {\n      return size;\n    }\n  };\n\n  trail.defined = function(_) {\n    if (arguments.length) {\n      defined = _;\n      return trail;\n    } else {\n      return defined;\n    }\n  };\n\n  trail.context = function(_) {\n    if (arguments.length) {\n      if (_ == null) {\n        context = null;\n      } else {\n        context = _;\n      }\n      return trail;\n    } else {\n      return context;\n    }\n  };\n\n  return trail;\n}\n","import curves from './curves';\nimport symbols from './symbols';\n\nimport {default as vg_rect} from './rectangle';\nimport {default as vg_trail} from './trail';\n\nimport {\n  arc as d3_arc,\n  area as d3_area,\n  line as d3_line,\n  symbol as d3_symbol\n} from 'd3-shape';\n\nfunction value(a, b) {\n  return a != null ? a : b;\n}\n\nconst x =  item => item.x || 0,\n      y =  item => item.y || 0,\n      w =  item => item.width || 0,\n      h =  item => item.height || 0,\n      xw = item => (item.x || 0) + (item.width || 0),\n      yh = item => (item.y || 0) + (item.height || 0),\n      sa = item => item.startAngle || 0,\n      ea = item => item.endAngle || 0,\n      pa = item => item.padAngle || 0,\n      ir = item => item.innerRadius || 0,\n      or = item => item.outerRadius || 0,\n      cr = item => item.cornerRadius || 0,\n      tl = item => value(item.cornerRadiusTopLeft, item.cornerRadius) || 0,\n      tr = item => value(item.cornerRadiusTopRight, item.cornerRadius) || 0,\n      br = item => value(item.cornerRadiusBottomRight, item.cornerRadius) || 0,\n      bl = item => value(item.cornerRadiusBottomLeft, item.cornerRadius) || 0,\n      sz = item => value(item.size, 64),\n      ts = item => item.size || 1,\n      def = item => !(item.defined === false),\n      type = item => symbols(item.shape || 'circle');\n\nconst arcShape    = d3_arc().startAngle(sa).endAngle(ea).padAngle(pa)\n                      .innerRadius(ir).outerRadius(or).cornerRadius(cr),\n      areavShape  = d3_area().x(x).y1(y).y0(yh).defined(def),\n      areahShape  = d3_area().y(y).x1(x).x0(xw).defined(def),\n      lineShape   = d3_line().x(x).y(y).defined(def),\n      rectShape   = vg_rect().x(x).y(y).width(w).height(h)\n                      .cornerRadius(tl, tr, br, bl),\n      symbolShape = d3_symbol().type(type).size(sz),\n      trailShape  = vg_trail().x(x).y(y).defined(def).size(ts);\n\nexport function hasCornerRadius(item) {\n  return item.cornerRadius\n    || item.cornerRadiusTopLeft\n    || item.cornerRadiusTopRight\n    || item.cornerRadiusBottomRight\n    || item.cornerRadiusBottomLeft;\n}\n\nexport function arc(context, item) {\n  return arcShape.context(context)(item);\n}\n\nexport function area(context, items) {\n  const item = items[0],\n        interp = item.interpolate || 'linear';\n  return (item.orient === 'horizontal' ? areahShape : areavShape)\n    .curve(curves(interp, item.orient, item.tension))\n    .context(context)(items);\n}\n\nexport function line(context, items) {\n  const item = items[0],\n        interp = item.interpolate || 'linear';\n  return lineShape.curve(curves(interp, item.orient, item.tension))\n    .context(context)(items);\n}\n\nexport function rectangle(context, item, x, y) {\n  return rectShape.context(context)(item, x, y);\n}\n\nexport function shape(context, item) {\n  return (item.mark.shape || item.shape)\n    .context(context)(item);\n}\n\nexport function symbol(context, item) {\n  return symbolShape.context(context)(item);\n}\n\nexport function trail(context, items) {\n  return trailShape.context(context)(items);\n}\n","import {hasCornerRadius, rectangle} from '../../path/shapes';\nimport {isFunction} from 'vega-util';\n\nvar clip_id = 1;\n\nexport function resetSVGClipId() {\n  clip_id = 1;\n}\n\nexport default function(renderer, item, size) {\n  var clip = item.clip,\n      defs = renderer._defs,\n      id = item.clip_id || (item.clip_id = 'clip' + clip_id++),\n      c = defs.clipping[id] || (defs.clipping[id] = {id: id});\n\n  if (isFunction(clip)) {\n    c.path = clip(null);\n  } else if (hasCornerRadius(size)) {\n    c.path = rectangle(null, size, 0, 0);\n  } else {\n    c.width = size.width || 0;\n    c.height = size.height || 0;\n  }\n\n  return 'url(#' + id + ')';\n}\n","export default function Bounds(b) {\n  this.clear();\n  if (b) this.union(b);\n}\n\nBounds.prototype = {\n  clone() {\n    return new Bounds(this);\n  },\n\n  clear() {\n    this.x1 = +Number.MAX_VALUE;\n    this.y1 = +Number.MAX_VALUE;\n    this.x2 = -Number.MAX_VALUE;\n    this.y2 = -Number.MAX_VALUE;\n    return this;\n  },\n\n  empty() {\n    return (\n      this.x1 === +Number.MAX_VALUE &&\n      this.y1 === +Number.MAX_VALUE &&\n      this.x2 === -Number.MAX_VALUE &&\n      this.y2 === -Number.MAX_VALUE\n    );\n  },\n\n  equals(b) {\n    return (\n      this.x1 === b.x1 &&\n      this.y1 === b.y1 &&\n      this.x2 === b.x2 &&\n      this.y2 === b.y2\n    );\n  },\n\n  set(x1, y1, x2, y2) {\n    if (x2 < x1) {\n      this.x2 = x1;\n      this.x1 = x2;\n    } else {\n      this.x1 = x1;\n      this.x2 = x2;\n    }\n    if (y2 < y1) {\n      this.y2 = y1;\n      this.y1 = y2;\n    } else {\n      this.y1 = y1;\n      this.y2 = y2;\n    }\n    return this;\n  },\n\n  add(x, y) {\n    if (x < this.x1) this.x1 = x;\n    if (y < this.y1) this.y1 = y;\n    if (x > this.x2) this.x2 = x;\n    if (y > this.y2) this.y2 = y;\n    return this;\n  },\n\n  expand(d) {\n    this.x1 -= d;\n    this.y1 -= d;\n    this.x2 += d;\n    this.y2 += d;\n    return this;\n  },\n\n  round() {\n    this.x1 = Math.floor(this.x1);\n    this.y1 = Math.floor(this.y1);\n    this.x2 = Math.ceil(this.x2);\n    this.y2 = Math.ceil(this.y2);\n    return this;\n  },\n\n  scale(s) {\n    this.x1 *= s;\n    this.y1 *= s;\n    this.x2 *= s;\n    this.y2 *= s;\n    return this;\n  },\n\n  translate(dx, dy) {\n    this.x1 += dx;\n    this.x2 += dx;\n    this.y1 += dy;\n    this.y2 += dy;\n    return this;\n  },\n\n  rotate(angle, x, y) {\n    const p = this.rotatedPoints(angle, x, y);\n    return this.clear()\n      .add(p[0], p[1])\n      .add(p[2], p[3])\n      .add(p[4], p[5])\n      .add(p[6], p[7]);\n  },\n\n  rotatedPoints(angle, x, y) {\n    var {x1, y1, x2, y2} = this,\n        cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        cx = x - x * cos + y * sin,\n        cy = y - x * sin - y * cos;\n\n    return [\n      cos * x1 - sin * y1 + cx, sin * x1 + cos * y1 + cy,\n      cos * x1 - sin * y2 + cx, sin * x1 + cos * y2 + cy,\n      cos * x2 - sin * y1 + cx, sin * x2 + cos * y1 + cy,\n      cos * x2 - sin * y2 + cx, sin * x2 + cos * y2 + cy\n    ];\n  },\n\n  union(b) {\n    if (b.x1 < this.x1) this.x1 = b.x1;\n    if (b.y1 < this.y1) this.y1 = b.y1;\n    if (b.x2 > this.x2) this.x2 = b.x2;\n    if (b.y2 > this.y2) this.y2 = b.y2;\n    return this;\n  },\n\n  intersect(b) {\n    if (b.x1 > this.x1) this.x1 = b.x1;\n    if (b.y1 > this.y1) this.y1 = b.y1;\n    if (b.x2 < this.x2) this.x2 = b.x2;\n    if (b.y2 < this.y2) this.y2 = b.y2;\n    return this;\n  },\n\n  encloses(b) {\n    return b && (\n      this.x1 <= b.x1 &&\n      this.x2 >= b.x2 &&\n      this.y1 <= b.y1 &&\n      this.y2 >= b.y2\n    );\n  },\n\n  alignsWith(b) {\n    return b && (\n      this.x1 == b.x1 ||\n      this.x2 == b.x2 ||\n      this.y1 == b.y1 ||\n      this.y2 == b.y2\n    );\n  },\n\n  intersects(b) {\n    return b && !(\n      this.x2 < b.x1 ||\n      this.x1 > b.x2 ||\n      this.y2 < b.y1 ||\n      this.y1 > b.y2\n    );\n  },\n\n  contains(x, y) {\n    return !(\n      x < this.x1 ||\n      x > this.x2 ||\n      y < this.y1 ||\n      y > this.y2\n    );\n  },\n\n  width() {\n    return this.x2 - this.x1;\n  },\n\n  height() {\n    return this.y2 - this.y1;\n  }\n};\n","import Bounds from './Bounds';\n\nexport default function Item(mark) {\n  this.mark = mark;\n  this.bounds = (this.bounds || new Bounds());\n}\n","import Item from './Item';\nimport {inherits} from 'vega-util';\n\nexport default function GroupItem(mark) {\n  Item.call(this, mark);\n  this.items = (this.items || []);\n}\n\ninherits(GroupItem, Item);\n","import {image} from 'vega-canvas';\nimport {loader} from 'vega-loader';\nimport {hasOwnProperty} from 'vega-util';\n\nexport default function ResourceLoader(customLoader) {\n  this._pending = 0;\n  this._loader = customLoader || loader();\n}\n\nfunction increment(loader) {\n  loader._pending += 1;\n}\n\nfunction decrement(loader) {\n  loader._pending -= 1;\n}\n\nResourceLoader.prototype = {\n  pending() {\n    return this._pending;\n  },\n\n  sanitizeURL(uri) {\n    const loader = this;\n    increment(loader);\n\n    return loader._loader.sanitize(uri, {context:'href'})\n      .then(opt => {\n        decrement(loader);\n        return opt;\n      })\n      .catch(() => {\n        decrement(loader);\n        return null;\n      });\n  },\n\n  loadImage(uri) {\n    const loader = this,\n          Image = image();\n    increment(loader);\n\n    return loader._loader\n      .sanitize(uri, {context: 'image'})\n      .then(opt => {\n        const url = opt.href;\n        if (!url || !Image) throw {url: url};\n\n        const img = new Image();\n\n        // set crossOrigin only if cors is defined; empty string sets anonymous mode\n        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/crossOrigin\n        const cors = hasOwnProperty(opt, 'crossOrigin') ? opt.crossOrigin : 'anonymous';\n        if (cors != null) img.crossOrigin = cors;\n\n        // attempt to load image resource\n        img.onload = () => decrement(loader);\n        img.onerror = () => decrement(loader);\n        img.src = url;\n\n        return img;\n      })\n      .catch(e => {\n        decrement(loader);\n        return {complete: false, width: 0, height: 0, src: e && e.url || ''};\n      });\n  },\n\n  ready() {\n    const loader = this;\n    return new Promise(accept => {\n      function poll(value) {\n        if (!loader.pending()) accept(value);\n        else setTimeout(() => { poll(true); }, 10);\n      }\n      poll(false);\n    });\n  }\n};\n","export default function(bounds, item, miter) {\n  if (item.stroke && item.opacity !== 0 && item.strokeOpacity !== 0) {\n    const sw = item.strokeWidth != null ? +item.strokeWidth : 1;\n    bounds.expand(sw + (miter ? miterAdjustment(item, sw) : 0));\n  }\n  return bounds;\n}\n\nfunction miterAdjustment(item, strokeWidth) {\n  // TODO: more sophisticated adjustment? Or miter support in boundContext?\n  return item.strokeJoin && item.strokeJoin !== 'miter' ? 0 : strokeWidth;\n}\n","import {DegToRad, Epsilon, HalfPi, Tau} from '../util/constants';\n\nconst circleThreshold = Tau - 1e-8;\nlet bounds, lx, ly, rot, ma, mb, mc, md;\n\nconst add = (x, y) => bounds.add(x, y);\nconst addL = (x, y) => add(lx = x, ly = y);\nconst addX = x => add(x, bounds.y1);\nconst addY = y => add(bounds.x1, y);\n\nconst px = (x, y) => ma * x + mc * y;\nconst py = (x, y) => mb * x + md * y;\nconst addp = (x, y) => add(px(x, y), py(x, y));\nconst addpL = (x, y) => addL(px(x, y), py(x, y));\n\nexport default function(_, deg) {\n  bounds = _;\n  if (deg) {\n    rot = deg * DegToRad;\n    ma = md = Math.cos(rot);\n    mb = Math.sin(rot);\n    mc = -mb;\n  } else {\n    ma = md = 1;\n    rot = mb = mc = 0;\n  }\n  return context;\n}\n\nconst context = {\n  beginPath() {},\n  closePath() {},\n\n  moveTo: addpL,\n  lineTo: addpL,\n\n  rect(x, y, w, h) {\n    if (rot) {\n      addp(x + w, y);\n      addp(x + w, y + h);\n      addp(x, y + h);\n      addpL(x, y);\n    } else {\n      add(x + w, y + h);\n      addL(x, y);\n    }\n  },\n\n  quadraticCurveTo(x1, y1, x2, y2) {\n    const px1 = px(x1, y1),\n          py1 = py(x1, y1),\n          px2 = px(x2, y2),\n          py2 = py(x2, y2);\n    quadExtrema(lx, px1, px2, addX);\n    quadExtrema(ly, py1, py2, addY);\n    addL(px2, py2);\n  },\n\n  bezierCurveTo(x1, y1, x2, y2, x3, y3) {\n    const px1 = px(x1, y1),\n          py1 = py(x1, y1),\n          px2 = px(x2, y2),\n          py2 = py(x2, y2),\n          px3 = px(x3, y3),\n          py3 = py(x3, y3);\n    cubicExtrema(lx, px1, px2, px3, addX);\n    cubicExtrema(ly, py1, py2, py3, addY);\n    addL(px3, py3);\n  },\n\n  arc(cx, cy, r, sa, ea, ccw) {\n    sa += rot;\n    ea += rot;\n\n    // store last point on path\n    lx = r * Math.cos(ea) + cx;\n    ly = r * Math.sin(ea) + cy;\n\n    if (Math.abs(ea - sa) > circleThreshold) {\n      // treat as full circle\n      add(cx - r, cy - r);\n      add(cx + r, cy + r);\n    } else {\n      const update = a => add(r * Math.cos(a) + cx, r * Math.sin(a) + cy);\n      let s, i;\n\n      // sample end points\n      update(sa);\n      update(ea);\n\n      // sample interior points aligned with 90 degrees\n      if (ea !== sa) {\n        sa = sa % Tau; if (sa < 0) sa += Tau;\n        ea = ea % Tau; if (ea < 0) ea += Tau;\n\n        if (ea < sa) {\n          ccw = !ccw; // flip direction\n          s = sa; sa = ea; ea = s; // swap end-points\n        }\n\n        if (ccw) {\n          ea -= Tau;\n          s = sa - (sa % HalfPi);\n          for (i=0; i<4 && s>ea; ++i, s-=HalfPi) update(s);\n        } else {\n          s = sa - (sa % HalfPi) + HalfPi;\n          for (i=0; i<4 && s<ea; ++i, s=s+HalfPi) update(s);\n        }\n      }\n    }\n  }\n};\n\nfunction quadExtrema(x0, x1, x2, cb) {\n  const t = (x0 - x1) / (x0 + x2 - 2 * x1);\n  if (0 < t && t < 1) cb(x0 + (x1 - x0) * t);\n}\n\nfunction cubicExtrema(x0, x1, x2, x3, cb) {\n  const a = x3 - x0 + 3 * x1 - 3 * x2,\n        b = x0 + x2 - 2 * x1,\n        c = x0 - x1;\n\n  let t0 = 0, t1 = 0, r;\n\n  // solve for parameter t\n  if (Math.abs(a) > Epsilon) {\n    // quadratic equation\n    r = b * b + c * a;\n    if (r >= 0) {\n      r = Math.sqrt(r);\n      t0 = (-b + r) / a;\n      t1 = (-b - r) / a;\n    }\n  } else {\n    // linear equation\n    t0 = 0.5 * c / b;\n  }\n\n  // calculate position\n  if (0 < t0 && t0 < 1) cb(cubic(t0, x0, x1, x2, x3));\n  if (0 < t1 && t1 < 1) cb(cubic(t1, x0, x1, x2, x3));\n}\n\nfunction cubic(t, x0, x1, x2, x3) {\n  const s = 1 - t, s2 = s * s, t2 = t * t;\n  return (s2 * s * x0) + (3 * s2 * t * x1) + (3 * s * t2 * x2) + (t2 * t * x3);\n}\n","import {canvas} from 'vega-canvas';\n\nexport var context = (context = canvas(1,1))\n  ? context.getContext('2d')\n  : null;\n","import {context} from './canvas/context';\nimport Bounds from '../Bounds';\n\nconst b = new Bounds();\n\nexport function intersectPath(draw) {\n  return function(item, brush) {\n    // rely on (inaccurate) bounds intersection if no context\n    if (!context) return true;\n\n    // add path to offscreen graphics context\n    draw(context, item);\n\n    // get bounds intersection region\n    b.clear().union(item.bounds).intersect(brush).round();\n    const {x1, y1, x2, y2} = b;\n\n    // iterate over intersection region\n    // perform fine grained inclusion test\n    for (let y = y1; y <= y2; ++y) {\n      for (let x = x1; x <= x2; ++x) {\n        if (context.isPointInPath(x, y)) {\n          return true;\n        }\n      }\n    }\n\n    // false if no hits in intersection region\n    return false;\n  };\n}\n\nexport function intersectPoint(item, box) {\n  return box.contains(item.x || 0, item.y || 0);\n}\n\nexport function intersectRect(item, box) {\n  const x = item.x || 0,\n        y = item.y || 0,\n        w = item.width || 0,\n        h = item.height || 0;\n  return box.intersects(b.set(x, y, x + w, y + h));\n}\n\nexport function intersectRule(item, box) {\n  const x = item.x || 0,\n        y = item.y || 0,\n        x2 = item.x2 != null ? item.x2 : x,\n        y2 = item.y2 != null ? item.y2 : y;\n  return intersectBoxLine(box, x, y, x2, y2);\n}\n\nexport function intersectBoxLine(box, x, y, u, v) {\n  const {x1, y1, x2, y2} = box,\n        dx = u - x,\n        dy = v - y;\n\n  let t0 = 0, t1 = 1, p, q, r, e;\n\n  for (e=0; e<4; ++e) {\n    if (e === 0) { p = -dx; q = -(x1 - x); }\n    if (e === 1) { p =  dx; q =  (x2 - x); }\n    if (e === 2) { p = -dy; q = -(y1 - y); }\n    if (e === 3) { p =  dy; q =  (y2 - y); }\n\n    if (Math.abs(p) < 1e-10 && q < 0) return false;\n\n    r = q / p;\n\n    if (p < 0) {\n      if (r > t1) return false;\n      else if (r > t0) t0 = r;\n    } else if (p > 0) {\n      if (r < t0) return false;\n      else if (r < t1) t1 = r;\n    }\n  }\n\n  return true;\n}\n","export default function(context, item) {\n  context.globalCompositeOperation = item.blend || 'source-over';\n}\n","export default function(value, dflt) {\n  return value == null ? dflt : value;\n}\n","import value from '../value';\nimport {canvas} from 'vega-canvas';\n\nfunction addStops(gradient, stops) {\n  const n = stops.length;\n  for (let i=0; i<n; ++i) {\n    gradient.addColorStop(stops[i].offset, stops[i].color);\n  }\n  return gradient;\n}\n\nexport default function(context, spec, bounds) {\n  const w = bounds.width(),\n        h = bounds.height();\n  let gradient;\n\n\n  if (spec.gradient === 'radial') {\n    gradient = context.createRadialGradient(\n      bounds.x1 + value(spec.x1, 0.5) * w,\n      bounds.y1 + value(spec.y1, 0.5) * h,\n      Math.max(w, h) * value(spec.r1, 0),\n      bounds.x1 + value(spec.x2, 0.5) * w,\n      bounds.y1 + value(spec.y2, 0.5) * h,\n      Math.max(w, h) * value(spec.r2, 0.5)\n    );\n  } else { // linear gradient\n    const x1 = value(spec.x1, 0),\n          y1 = value(spec.y1, 0),\n          x2 = value(spec.x2, 1),\n          y2 = value(spec.y2, 0);\n\n    if (x1 === x2 || y1 === y2 || w === h) {\n      // axis aligned: use normal gradient\n      gradient = context.createLinearGradient(\n        bounds.x1 + x1 * w,\n        bounds.y1 + y1 * h,\n        bounds.x1 + x2 * w,\n        bounds.y1 + y2 * h\n      );\n    } else {\n      // not axis aligned: render gradient into a pattern (#2365)\n      // this allows us to use normalized bounding box coordinates\n      const image = canvas(Math.ceil(w), Math.ceil(h)),\n            ictx = image.getContext('2d');\n\n      ictx.scale(w, h);\n      ictx.fillStyle = addStops(\n        ictx.createLinearGradient(x1, y1, x2, y2),\n        spec.stops\n      );\n      ictx.fillRect(0, 0, w, h);\n\n      return context.createPattern(image, 'no-repeat');\n    }\n  }\n\n  return addStops(gradient, spec.stops);\n}\n","import {isGradient} from '../../Gradient';\nimport gradient from './gradient';\n\nexport default function(context, item, value) {\n  return isGradient(value)\n    ? gradient(context, value, item.bounds)\n    : value;\n}\n","import color from './color';\n\nexport default function(context, item, opacity) {\n  opacity *= (item.fillOpacity==null ? 1 : item.fillOpacity);\n  if (opacity > 0) {\n    context.globalAlpha = opacity;\n    context.fillStyle = color(context, item, item.fill);\n    return true;\n  } else {\n    return false;\n  }\n}\n","import color from './color';\n\nvar Empty = [];\n\nexport default function(context, item, opacity) {\n  var lw = (lw = item.strokeWidth) != null ? lw : 1;\n\n  if (lw <= 0) return false;\n\n  opacity *= (item.strokeOpacity==null ? 1 : item.strokeOpacity);\n  if (opacity > 0) {\n    context.globalAlpha = opacity;\n    context.strokeStyle = color(context, item, item.stroke);\n\n    context.lineWidth = lw;\n    context.lineCap = item.strokeCap || 'butt';\n    context.lineJoin = item.strokeJoin || 'miter';\n    context.miterLimit = item.strokeMiterLimit || 10;\n\n    if (context.setLineDash) {\n      context.setLineDash(item.strokeDash || Empty);\n      context.lineDashOffset = item.strokeDashOffset || 0;\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n","function compare(a, b) {\n  return a.zindex - b.zindex || a.index - b.index;\n}\n\nexport function zorder(scene) {\n  if (!scene.zdirty) return scene.zitems;\n\n  var items = scene.items,\n      output = [], item, i, n;\n\n  for (i=0, n=items.length; i<n; ++i) {\n    item = items[i];\n    item.index = i;\n    if (item.zindex) output.push(item);\n  }\n\n  scene.zdirty = false;\n  return scene.zitems = output.sort(compare);\n}\n\nexport function visit(scene, visitor) {\n  var items = scene.items, i, n;\n  if (!items || !items.length) return;\n\n  const zitems = zorder(scene);\n\n  if (zitems && zitems.length) {\n    for (i=0, n=items.length; i<n; ++i) {\n      if (!items[i].zindex) visitor(items[i]);\n    }\n    items = zitems;\n  }\n\n  for (i=0, n=items.length; i<n; ++i) {\n    visitor(items[i]);\n  }\n}\n\nexport function pickVisit(scene, visitor) {\n  var items = scene.items, hit, i;\n  if (!items || !items.length) return null;\n\n  const zitems = zorder(scene);\n  if (zitems && zitems.length) items = zitems;\n\n  for (i=items.length; --i >= 0;) {\n    if (hit = visitor(items[i])) return hit;\n  }\n\n  if (items === zitems) {\n    for (items=scene.items, i=items.length; --i >= 0;) {\n      if (!items[i].zindex) {\n        if (hit = visitor(items[i])) return hit;\n      }\n    }\n  }\n\n  return null;\n}\n","import blend from './blend';\nimport fill from './fill';\nimport stroke from './stroke';\nimport {visit} from '../visit';\n\nexport function drawAll(path) {\n  return function(context, scene, bounds) {\n    visit(scene, item => {\n      if (!bounds || bounds.intersects(item.bounds)) {\n        drawPath(path, context, item, item);\n      }\n    });\n  };\n}\n\nexport function drawOne(path) {\n  return function(context, scene, bounds) {\n    if (scene.items.length && (!bounds || bounds.intersects(scene.bounds))) {\n      drawPath(path, context, scene.items[0], scene.items);\n    }\n  };\n}\n\nfunction drawPath(path, context, item, items) {\n  var opacity = item.opacity == null ? 1 : item.opacity;\n  if (opacity === 0) return;\n\n  if (path(context, items)) return;\n\n  blend(context, item);\n\n  if (item.fill && fill(context, item, opacity)) {\n    context.fill();\n  }\n\n  if (item.stroke && stroke(context, item, opacity)) {\n    context.stroke();\n  }\n}\n","import {pickVisit} from '../visit';\nimport {truthy} from 'vega-util';\n\nexport function pick(test) {\n  test = test || truthy;\n\n  return function(context, scene, x, y, gx, gy) {\n    x *= context.pixelRatio;\n    y *= context.pixelRatio;\n\n    return pickVisit(scene, item => {\n      const b = item.bounds;\n      // first hit test against bounding box\n      if ((b && !b.contains(gx, gy)) || !b) return;\n      // if in bounding box, perform more careful test\n      if (test(context, item, x, y, gx, gy)) return item;\n    });\n  };\n}\n\nexport function hitPath(path, filled) {\n  return function(context, o, x, y) {\n    var item = Array.isArray(o) ? o[0] : o,\n        fill = (filled == null) ? item.fill : filled,\n        stroke = item.stroke && context.isPointInStroke, lw, lc;\n\n    if (stroke) {\n      lw = item.strokeWidth;\n      lc = item.strokeCap;\n      context.lineWidth = lw != null ? lw : 1;\n      context.lineCap   = lc != null ? lc : 'butt';\n    }\n\n    return path(context, o) ? false :\n      (fill && context.isPointInPath(x, y)) ||\n      (stroke && context.isPointInStroke(x, y));\n  };\n}\n\nexport function pickPath(path) {\n  return pick(hitPath(path));\n}\n","export function translate(x, y) {\n  return 'translate(' + x + ',' + y + ')';\n}\n\nexport function rotate(a) {\n  return 'rotate(' + a + ')';\n}\n\nexport function scale(scaleX, scaleY){\n  return 'scale('+ scaleX + ',' + scaleY+')';\n}\n\nexport function translateItem(item) {\n  return translate(item.x || 0, item.y || 0);\n}\n\nexport function rotateItem(item) {\n  return translate(item.x || 0, item.y || 0)\n    + (item.angle ? ' ' + rotate(item.angle) : '');\n}\n\nexport function transformItem(item) {\n  return translate(item.x || 0, item.y || 0)\n    + (item.angle ? ' ' + rotate(item.angle) : '')\n    + (item.scaleX || item.scaleY ? ' ' + scale(item.scaleX || 1, item.scaleY || 1) : '');\n}\n","import boundStroke from '../bound/boundStroke';\nimport context from '../bound/boundContext';\nimport {intersectPath} from '../util/intersect';\nimport {drawAll} from '../util/canvas/draw';\nimport {pickPath} from '../util/canvas/pick';\nimport {rotateItem} from '../util/svg/transform';\nimport {DegToRad} from '../util/constants';\n\nexport default function(type, shape, isect) {\n\n  function attr(emit, item) {\n    emit('transform', rotateItem(item));\n    emit('d', shape(null, item));\n  }\n\n  function bound(bounds, item) {\n    shape(context(bounds, item.angle), item);\n    return boundStroke(bounds, item).translate(item.x || 0, item.y || 0);\n  }\n\n  function draw(context, item) {\n    var x = item.x || 0,\n        y = item.y || 0,\n        a = item.angle || 0;\n\n    context.translate(x, y);\n    if (a) context.rotate(a *= DegToRad);\n    context.beginPath();\n    shape(context, item);\n    if (a) context.rotate(-a);\n    context.translate(-x, -y);\n  }\n\n  return {\n    type:   type,\n    tag:    'path',\n    nested: false,\n    attr:   attr,\n    bound:  bound,\n    draw:   drawAll(draw),\n    pick:   pickPath(draw),\n    isect:  isect || intersectPath(draw)\n  };\n\n}\n","import {arc} from '../path/shapes';\nimport markItemPath from './markItemPath';\n\nexport default markItemPath('arc', arc);\n","import boundStroke from '../bound/boundStroke';\nimport context from '../bound/boundContext';\nimport {intersectPoint} from '../util/intersect';\nimport {drawOne} from '../util/canvas/draw';\nimport {hitPath} from '../util/canvas/pick';\n\nexport default function(type, shape, tip) {\n\n  function attr(emit, item) {\n    var items = item.mark.items;\n    if (items.length) emit('d', shape(null, items));\n  }\n\n  function bound(bounds, mark) {\n    var items = mark.items;\n    if (items.length === 0) {\n      return bounds;\n    } else {\n      shape(context(bounds), items);\n      return boundStroke(bounds, items[0]);\n    }\n  }\n\n  function draw(context, items) {\n    context.beginPath();\n    shape(context, items);\n  }\n\n  const hit = hitPath(draw);\n\n  function pick(context, scene, x, y, gx, gy) {\n    var items = scene.items,\n        b = scene.bounds;\n\n    if (!items || !items.length || b && !b.contains(gx, gy)) {\n      return null;\n    }\n\n    x *= context.pixelRatio;\n    y *= context.pixelRatio;\n    return hit(context, items, x, y) ? items[0] : null;\n  }\n\n  return {\n    type:   type,\n    tag:    'path',\n    nested: true,\n    attr:   attr,\n    bound:  bound,\n    draw:   drawOne(draw),\n    pick:   pick,\n    isect:  intersectPoint,\n    tip:    tip\n  };\n\n}\n\n\n","import {area} from '../path/shapes';\nimport {pickArea} from '../util/pickPath';\nimport markMultiItemPath from './markMultiItemPath';\n\nexport default markMultiItemPath('area', area, pickArea);\n","export function pickArea(a, p) {\n  var v = a[0].orient === 'horizontal' ? p[1] : p[0],\n      z = a[0].orient === 'horizontal' ? 'y' : 'x',\n      i = a.length,\n      min = +Infinity, hit, d;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    d = Math.abs(a[i][z] - v);\n    if (d < min) {\n      min = d;\n      hit = a[i];\n    }\n  }\n\n  return hit;\n}\n\nexport function pickLine(a, p) {\n  var t = Math.pow(a[0].strokeWidth || 1, 2),\n      i = a.length, dx, dy, dd;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    dx = a[i].x - p[0];\n    dy = a[i].y - p[1];\n    dd = dx * dx + dy * dy;\n    if (dd < t) return a[i];\n  }\n\n  return null;\n}\n\nexport function pickTrail(a, p) {\n  var i = a.length, dx, dy, dd;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    dx = a[i].x - p[0];\n    dy = a[i].y - p[1];\n    dd = dx * dx + dy * dy;\n    dx = a[i].size || 1;\n    if (dd < dx*dx) return a[i];\n  }\n\n  return null;\n}\n","import {hasCornerRadius, rectangle} from '../../path/shapes';\nimport {isFunction} from 'vega-util';\n\nexport default function(context, scene) {\n  var clip = scene.clip;\n\n  context.save();\n\n  if (isFunction(clip)) {\n    context.beginPath();\n    clip(context);\n    context.clip();\n  } else {\n    clipGroup(context, scene.group);\n  }\n}\n\nexport function clipGroup(context, group) {\n  context.beginPath();\n  hasCornerRadius(group)\n    ? rectangle(context, group, 0, 0)\n    : context.rect(0, 0, group.width || 0, group.height || 0);\n  context.clip();\n}\n","import {hasCornerRadius, rectangle} from '../path/shapes';\nimport boundStroke from '../bound/boundStroke';\nimport {intersectRect} from '../util/intersect';\nimport value from '../util/value';\nimport {pickVisit, visit} from '../util/visit';\nimport blend from '../util/canvas/blend';\nimport {clipGroup} from '../util/canvas/clip';\nimport fill from '../util/canvas/fill';\nimport stroke from '../util/canvas/stroke';\nimport {hitPath} from '../util/canvas/pick';\nimport clip from '../util/svg/clip';\nimport {translateItem} from '../util/svg/transform';\n\nfunction offset(item) {\n  const sw = value(item.strokeWidth, 1);\n  return item.strokeOffset != null ? item.strokeOffset\n    : item.stroke && sw > 0.5 && sw < 1.5 ? 0.5 - Math.abs(sw - 1)\n    : 0;\n}\n\nfunction attr(emit, item) {\n  emit('transform', translateItem(item));\n}\n\nfunction emitRectangle(emit, item) {\n  const off = offset(item);\n  emit('d', rectangle(null, item, off, off));\n}\n\nfunction background(emit, item) {\n  emit('class', 'background');\n  emit('aria-hidden', true);\n  emitRectangle(emit, item);\n}\n\nfunction foreground(emit, item) {\n  emit('class', 'foreground');\n  emit('aria-hidden', true);\n  if (item.strokeForeground) {\n    emitRectangle(emit, item);\n  } else {\n    emit('d', '');\n  }\n}\n\nfunction content(emit, item, renderer) {\n  const url = item.clip ? clip(renderer, item, item) : null;\n  emit('clip-path', url);\n}\n\nfunction bound(bounds, group) {\n  if (!group.clip && group.items) {\n    const items = group.items, m = items.length;\n    for (let j=0; j<m; ++j) {\n      bounds.union(items[j].bounds);\n    }\n  }\n\n  if ((group.clip || group.width || group.height) && !group.noBound) {\n    bounds.add(0, 0).add(group.width || 0, group.height || 0);\n  }\n\n  boundStroke(bounds, group);\n\n  return bounds.translate(group.x || 0, group.y || 0);\n}\n\nfunction rectanglePath(context, group, x, y) {\n  const off = offset(group);\n  context.beginPath();\n  rectangle(context, group, (x || 0) + off, (y || 0) + off);\n}\n\nconst hitBackground = hitPath(rectanglePath);\nconst hitForeground = hitPath(rectanglePath, false);\nconst hitCorner = hitPath(rectanglePath, true);\n\nfunction draw(context, scene, bounds) {\n  visit(scene, group => {\n    const gx = group.x || 0,\n          gy = group.y || 0,\n          fore = group.strokeForeground,\n          opacity = group.opacity == null ? 1 : group.opacity;\n\n    // draw group background\n    if ((group.stroke || group.fill) && opacity) {\n      rectanglePath(context, group, gx, gy);\n      blend(context, group);\n      if (group.fill && fill(context, group, opacity)) {\n        context.fill();\n      }\n      if (group.stroke && !fore && stroke(context, group, opacity)) {\n        context.stroke();\n      }\n    }\n\n    // setup graphics context, set clip and bounds\n    context.save();\n    context.translate(gx, gy);\n    if (group.clip) clipGroup(context, group);\n    if (bounds) bounds.translate(-gx, -gy);\n\n    // draw group contents\n    visit(group, item => {\n      this.draw(context, item, bounds);\n    });\n\n    // restore graphics context\n    if (bounds) bounds.translate(gx, gy);\n    context.restore();\n\n    // draw group foreground\n    if (fore && group.stroke && opacity) {\n      rectanglePath(context, group, gx, gy);\n      blend(context, group);\n      if (stroke(context, group, opacity)) {\n        context.stroke();\n      }\n    }\n  });\n}\n\nfunction pick(context, scene, x, y, gx, gy) {\n  if (scene.bounds && !scene.bounds.contains(gx, gy) || !scene.items) {\n    return null;\n  }\n\n  const cx = x * context.pixelRatio,\n        cy = y * context.pixelRatio;\n\n  return pickVisit(scene, group => {\n    let hit, dx, dy;\n\n    // first hit test bounding box\n    const b = group.bounds;\n    if (b && !b.contains(gx, gy)) return;\n\n    // passed bounds check, test rectangular clip\n    dx = group.x || 0;\n    dy = group.y || 0;\n    const dw = dx + (group.width || 0),\n          dh = dy + (group.height || 0),\n          c = group.clip;\n    if (c && (gx < dx || gx > dw || gy < dy || gy > dh)) return;\n\n    // adjust coordinate system\n    context.save();\n    context.translate(dx, dy);\n    dx = gx - dx;\n    dy = gy - dy;\n\n    // test background for rounded corner clip\n    if (c && hasCornerRadius(group) && !hitCorner(context, group, cx, cy)) {\n      context.restore();\n      return null;\n    }\n\n    const fore = group.strokeForeground,\n          ix = scene.interactive !== false;\n\n    // hit test against group foreground\n    if (ix && fore && group.stroke\n        && hitForeground(context, group, cx, cy)) {\n      context.restore();\n      return group;\n    }\n\n    // hit test against contained marks\n    hit = pickVisit(group, mark => pickMark(mark, dx, dy)\n      ? this.pick(mark, x, y, dx, dy)\n      : null\n    );\n\n    // hit test against group background\n    if (!hit && ix && (group.fill || (!fore && group.stroke))\n        && hitBackground(context, group, cx, cy)) {\n      hit = group;\n    }\n\n    // restore state and return\n    context.restore();\n    return hit || null;\n  });\n}\n\nfunction pickMark(mark, x, y) {\n  return (mark.interactive !== false || mark.marktype === 'group')\n    && mark.bounds && mark.bounds.contains(x, y);\n}\n\nexport default {\n  type:       'group',\n  tag:        'g',\n  nested:     false,\n  attr:       attr,\n  bound:      bound,\n  draw:       draw,\n  pick:       pick,\n  isect:      intersectRect,\n  content:    content,\n  background: background,\n  foreground: foreground\n};\n","export default {\n  'xmlns': 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  'version': '1.1'\n};","import {visit} from '../util/visit';\nimport blend from '../util/canvas/blend';\nimport {pick} from '../util/canvas/pick';\nimport metadata from '../util/svg/metadata';\nimport {translate} from '../util/svg/transform';\nimport {truthy} from 'vega-util';\n\nfunction getImage(item, renderer) {\n  var image = item.image;\n  if (!image || item.url && item.url !== image.url) {\n    image = {complete: false, width: 0, height: 0};\n    renderer.loadImage(item.url).then(image => {\n      item.image = image;\n      item.image.url = item.url;\n    });\n  }\n  return image;\n}\n\nfunction imageWidth(item, image) {\n  return item.width != null ? item.width\n    : !image || !image.width ? 0\n    : item.aspect !== false && item.height ? item.height * image.width / image.height\n    : image.width;\n}\n\nfunction imageHeight(item, image) {\n  return item.height != null ? item.height\n    : !image || !image.height ? 0\n    : item.aspect !== false && item.width ? item.width * image.height / image.width\n    : image.height;\n}\n\nfunction imageXOffset(align, w) {\n  return align === 'center' ? w / 2 : align === 'right' ? w : 0;\n}\n\nfunction imageYOffset(baseline, h) {\n  return baseline === 'middle' ? h / 2 : baseline === 'bottom' ? h : 0;\n}\n\nfunction attr(emit, item, renderer) {\n  const img = getImage(item, renderer),\n        w = imageWidth(item, img),\n        h = imageHeight(item, img),\n        x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h),\n        i = !img.src && img.toDataURL ? img.toDataURL() : img.src || '';\n\n  emit('href', i, metadata['xmlns:xlink'], 'xlink:href');\n  emit('transform', translate(x, y));\n  emit('width', w);\n  emit('height', h);\n  emit('preserveAspectRatio', item.aspect === false ? 'none' : 'xMidYMid');\n}\n\nfunction bound(bounds, item) {\n  const img = item.image,\n        w = imageWidth(item, img),\n        h = imageHeight(item, img),\n        x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h);\n\n  return bounds.set(x, y, x + w, y + h);\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    if (bounds && !bounds.intersects(item.bounds)) return; // bounds check\n\n    const img = getImage(item, this);\n\n    let w = imageWidth(item, img);\n    let h = imageHeight(item, img);\n    if (w === 0 || h === 0) return; // early exit\n\n    let x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h),\n        opacity, ar0, ar1, t;\n\n    if (item.aspect !== false) {\n      ar0 = img.width / img.height;\n      ar1 = item.width / item.height;\n      if (ar0 === ar0 && ar1 === ar1 && ar0 !== ar1) {\n        if (ar1 < ar0) {\n          t = w / ar0;\n          y += (h - t) / 2;\n          h = t;\n        } else {\n          t = h * ar0;\n          x += (w - t) / 2;\n          w = t;\n        }\n      }\n    }\n\n    if (img.complete || img.toDataURL) {\n      blend(context, item);\n      context.globalAlpha = (opacity = item.opacity) != null ? opacity : 1;\n      context.imageSmoothingEnabled = item.smooth !== false;\n      context.drawImage(img, x, y, w, h);\n    }\n  });\n}\n\nexport default {\n  type:     'image',\n  tag:      'image',\n  nested:   false,\n  attr:     attr,\n  bound:    bound,\n  draw:     draw,\n  pick:     pick(),\n  isect:    truthy, // bounds check is sufficient\n  get:      getImage,\n  xOffset:  imageXOffset,\n  yOffset:  imageYOffset\n};\n","import {line} from '../path/shapes';\nimport {pickLine} from '../util/pickPath';\nimport markMultiItemPath from './markMultiItemPath';\n\nexport default markMultiItemPath('line', line, pickLine);\n","import boundStroke from '../bound/boundStroke';\nimport context from '../bound/boundContext';\nimport pathParse from '../path/parse';\nimport pathRender from '../path/render';\nimport {intersectPath} from '../util/intersect';\nimport {drawAll} from '../util/canvas/draw';\nimport {pickPath} from '../util/canvas/pick';\nimport {transformItem} from '../util/svg/transform';\nimport {DegToRad} from '../util/constants';\n\nfunction attr(emit, item) {\n  var sx = item.scaleX || 1,\n      sy = item.scaleY || 1;\n  if (sx !== 1 || sy !== 1) {\n    emit('vector-effect', 'non-scaling-stroke');\n  }\n  emit('transform', transformItem(item));\n  emit('d', item.path);\n}\n\nfunction path(context, item) {\n  var path = item.path;\n  if (path == null) return true;\n\n  var x = item.x || 0,\n      y = item.y || 0,\n      sx = item.scaleX || 1,\n      sy = item.scaleY || 1,\n      a = (item.angle || 0) * DegToRad,\n      cache = item.pathCache;\n\n  if (!cache || cache.path !== path) {\n    (item.pathCache = cache = pathParse(path)).path = path;\n  }\n\n  if (a && context.rotate && context.translate) {\n    context.translate(x, y);\n    context.rotate(a);\n    pathRender(context, cache, 0, 0, sx, sy);\n    context.rotate(-a);\n    context.translate(-x, -y);\n  } else {\n    pathRender(context, cache, x, y, sx, sy);\n  }\n}\n\nfunction bound(bounds, item) {\n  return path(context(bounds, item.angle), item)\n    ? bounds.set(0, 0, 0, 0)\n    : boundStroke(bounds, item, true);\n}\n\nexport default {\n  type:   'path',\n  tag:    'path',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   drawAll(path),\n  pick:   pickPath(path),\n  isect:  intersectPath(path)\n};\n","import boundStroke from '../bound/boundStroke';\nimport {rectangle} from '../path/shapes';\nimport {intersectRect} from '../util/intersect';\nimport {drawAll} from '../util/canvas/draw';\nimport {pickPath} from '../util/canvas/pick';\n\nfunction attr(emit, item) {\n  emit('d', rectangle(null, item));\n}\n\nfunction bound(bounds, item) {\n  var x, y;\n  return boundStroke(bounds.set(\n    x = item.x || 0,\n    y = item.y || 0,\n    (x + item.width) || 0,\n    (y + item.height) || 0\n  ), item);\n}\n\nfunction draw(context, item) {\n  context.beginPath();\n  rectangle(context, item);\n}\n\nexport default {\n  type:   'rect',\n  tag:    'path',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   drawAll(draw),\n  pick:   pickPath(draw),\n  isect:  intersectRect\n};\n","import boundStroke from '../bound/boundStroke';\nimport {intersectRule} from '../util/intersect';\nimport {visit} from '../util/visit';\nimport blend from '../util/canvas/blend';\nimport {pick} from '../util/canvas/pick';\nimport stroke from '../util/canvas/stroke';\nimport {translateItem} from '../util/svg/transform';\n\nfunction attr(emit, item) {\n  emit('transform', translateItem(item));\n  emit('x2', item.x2 != null ? item.x2 - (item.x || 0) : 0);\n  emit('y2', item.y2 != null ? item.y2 - (item.y || 0) : 0);\n}\n\nfunction bound(bounds, item) {\n  var x1, y1;\n  return boundStroke(bounds.set(\n    x1 = item.x || 0,\n    y1 = item.y || 0,\n    item.x2 != null ? item.x2 : x1,\n    item.y2 != null ? item.y2 : y1\n  ), item);\n}\n\nfunction path(context, item, opacity) {\n  var x1, y1, x2, y2;\n\n  if (item.stroke && stroke(context, item, opacity)) {\n    x1 = item.x || 0;\n    y1 = item.y || 0;\n    x2 = item.x2 != null ? item.x2 : x1;\n    y2 = item.y2 != null ? item.y2 : y1;\n    context.beginPath();\n    context.moveTo(x1, y1);\n    context.lineTo(x2, y2);\n    return true;\n  }\n  return false;\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    if (bounds && !bounds.intersects(item.bounds)) return; // bounds check\n    var opacity = item.opacity == null ? 1 : item.opacity;\n    if (opacity && path(context, item, opacity)) {\n      blend(context, item);\n      context.stroke();\n    }\n  });\n}\n\nfunction hit(context, item, x, y) {\n  if (!context.isPointInStroke) return false;\n  return path(context, item, 1) && context.isPointInStroke(x, y);\n}\n\nexport default {\n  type:   'rule',\n  tag:    'line',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   draw,\n  pick:   pick(hit),\n  isect:  intersectRule\n};\n","import {shape} from '../path/shapes';\nimport markItemPath from './markItemPath';\n\nexport default markItemPath('shape', shape);\n","import {symbol} from '../path/shapes';\nimport {intersectPoint} from '../util/intersect';\nimport markItemPath from './markItemPath';\n\nexport default markItemPath('symbol', symbol, intersectPoint);\n","import {context} from './canvas/context';\nimport {isArray, lruCache} from 'vega-util';\n\n// memoize text width measurement\nconst widthCache = lruCache();\n\nexport var textMetrics = {\n  height: fontSize,\n  measureWidth: measureWidth,\n  estimateWidth: estimateWidth,\n  width: estimateWidth,\n  canvas: useCanvas\n};\n\nuseCanvas(true);\n\nfunction useCanvas(use) {\n  textMetrics.width = (use && context) ? measureWidth : estimateWidth;\n}\n\n// make simple estimate if no canvas is available\nfunction estimateWidth(item, text) {\n  return _estimateWidth(textValue(item, text), fontSize(item));\n}\n\nfunction _estimateWidth(text, currentFontHeight) {\n  return ~~(0.8 * text.length * currentFontHeight);\n}\n\n// measure text width if canvas is available\nfunction measureWidth(item, text) {\n  return fontSize(item) <= 0 || !(text = textValue(item, text)) ? 0\n    : _measureWidth(text, font(item));\n}\n\nfunction _measureWidth(text, currentFont) {\n  const key = `(${currentFont}) ${text}`;\n  let width = widthCache.get(key);\n  if (width === undefined) {\n    context.font = currentFont;\n    width = context.measureText(text).width;\n    widthCache.set(key, width);\n  }\n  return width;\n}\n\nexport function fontSize(item) {\n  return item.fontSize != null ? (+item.fontSize || 0) : 11;\n}\n\nexport function lineHeight(item) {\n  return item.lineHeight != null ? item.lineHeight : (fontSize(item) + 2);\n}\n\nfunction lineArray(_) {\n  return isArray(_) ? _.length > 1 ? _ : _[0] : _;\n}\n\nexport function textLines(item) {\n  return lineArray(\n    item.lineBreak && item.text && !isArray(item.text)\n      ? item.text.split(item.lineBreak)\n      : item.text\n  );\n}\n\nexport function multiLineOffset(item) {\n  const tl = textLines(item);\n  return (isArray(tl) ? (tl.length - 1) : 0) * lineHeight(item);\n}\n\nexport function textValue(item, line) {\n  const text = line == null ? '' : (line + '').trim();\n  return item.limit > 0 && text.length ? truncate(item, text) : text;\n}\n\nfunction widthGetter(item) {\n  if (textMetrics.width === measureWidth) {\n    // we are using canvas\n    const currentFont = font(item);\n    return text => _measureWidth(text, currentFont);\n  } else {\n    // we are relying on estimates\n    const currentFontHeight = fontSize(item);\n    return text => _estimateWidth(text, currentFontHeight);\n  }\n}\n\nfunction truncate(item, text) {\n  var limit = +item.limit,\n      width = widthGetter(item);\n\n  if (width(text) < limit) return text;\n\n  var ellipsis = item.ellipsis || '\\u2026',\n      rtl = item.dir === 'rtl',\n      lo = 0,\n      hi = text.length, mid;\n\n  limit -= width(ellipsis);\n\n  if (rtl) {\n    while (lo < hi) {\n      mid = (lo + hi >>> 1);\n      if (width(text.slice(mid)) > limit) lo = mid + 1;\n      else hi = mid;\n    }\n    return ellipsis + text.slice(lo);\n  } else {\n    while (lo < hi) {\n      mid = 1 + (lo + hi >>> 1);\n      if (width(text.slice(0, mid)) < limit) lo = mid;\n      else hi = mid - 1;\n    }\n    return text.slice(0, lo) + ellipsis;\n  }\n}\n\nexport function fontFamily(item, quote) {\n  var font = item.font;\n  return (quote && font\n    ? String(font).replace(/\"/g, '\\'')\n    : font) || 'sans-serif';\n}\n\nexport function font(item, quote) {\n  return '' +\n    (item.fontStyle ? item.fontStyle + ' ' : '') +\n    (item.fontVariant ? item.fontVariant + ' ' : '') +\n    (item.fontWeight ? item.fontWeight + ' ' : '') +\n    fontSize(item) + 'px ' +\n    fontFamily(item, quote);\n}\n\nexport function offset(item) {\n  // perform our own font baseline calculation\n  // why? not all browsers support SVG 1.1 'alignment-baseline' :(\n  // this also ensures consistent layout across renderers\n  var baseline = item.baseline,\n      h = fontSize(item);\n\n  return Math.round(\n    baseline === 'top'         ?  0.79 * h :\n    baseline === 'middle'      ?  0.30 * h :\n    baseline === 'bottom'      ? -0.21 * h :\n    baseline === 'line-top'    ?  0.29 * h + 0.5 * lineHeight(item) :\n    baseline === 'line-bottom' ?  0.29 * h - 0.5 * lineHeight(item) : 0\n  );\n}\n","import Bounds from '../Bounds';\nimport {DegToRad, HalfPi} from '../util/constants';\nimport {font, lineHeight, offset, textLines, textMetrics, textValue} from '../util/text';\nimport {intersectBoxLine} from '../util/intersect';\nimport {visit} from '../util/visit';\nimport blend from '../util/canvas/blend';\nimport fill from '../util/canvas/fill';\nimport {pick} from '../util/canvas/pick';\nimport stroke from '../util/canvas/stroke';\nimport {rotate, translate} from '../util/svg/transform';\nimport {isArray} from 'vega-util';\n\nconst textAlign = {\n  'left':   'start',\n  'center': 'middle',\n  'right':  'end'\n};\n\nconst tempBounds = new Bounds();\n\nfunction anchorPoint(item) {\n  var x = item.x || 0,\n      y = item.y || 0,\n      r = item.radius || 0, t;\n\n  if (r) {\n    t = (item.theta || 0) - HalfPi;\n    x += r * Math.cos(t);\n    y += r * Math.sin(t);\n  }\n\n  tempBounds.x1 = x;\n  tempBounds.y1 = y;\n  return tempBounds;\n}\n\nfunction attr(emit, item) {\n  var dx = item.dx || 0,\n      dy = (item.dy || 0) + offset(item),\n      p = anchorPoint(item),\n      x = p.x1,\n      y = p.y1,\n      a = item.angle || 0, t;\n\n  emit('text-anchor', textAlign[item.align] || 'start');\n\n  if (a) {\n    t = translate(x, y) + ' ' + rotate(a);\n    if (dx || dy) t += ' ' + translate(dx, dy);\n  } else {\n    t = translate(x + dx, y + dy);\n  }\n  emit('transform', t);\n}\n\nfunction bound(bounds, item, mode) {\n  var h = textMetrics.height(item),\n      a = item.align,\n      p = anchorPoint(item),\n      x = p.x1,\n      y = p.y1,\n      dx = item.dx || 0,\n      dy = (item.dy || 0) + offset(item) - Math.round(0.8*h), // use 4/5 offset\n      tl = textLines(item),\n      w;\n\n  // get dimensions\n  if (isArray(tl)) {\n    // multi-line text\n    h += lineHeight(item) * (tl.length - 1);\n    w = tl.reduce((w, t) => Math.max(w, textMetrics.width(item, t)), 0);\n  } else {\n    // single-line text\n    w = textMetrics.width(item, tl);\n  }\n\n  // horizontal alignment\n  if (a === 'center') {\n    dx -= (w / 2);\n  } else if (a === 'right') {\n    dx -= w;\n  } else {\n    // left by default, do nothing\n  }\n\n  bounds.set(dx+=x, dy+=y, dx+w, dy+h);\n\n  if (item.angle && !mode) {\n    bounds.rotate(item.angle * DegToRad, x, y);\n  } else if (mode === 2) {\n    return bounds.rotatedPoints(item.angle * DegToRad, x, y);\n  }\n  return bounds;\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    var opacity = item.opacity == null ? 1 : item.opacity,\n        p, x, y, i, lh, tl, str;\n\n    if (bounds && !bounds.intersects(item.bounds) || // bounds check\n        opacity === 0 || item.fontSize <= 0 ||\n        item.text == null || item.text.length === 0) return;\n\n    context.font = font(item);\n    context.textAlign = item.align || 'left';\n\n    p = anchorPoint(item);\n    x = p.x1,\n    y = p.y1;\n\n    if (item.angle) {\n      context.save();\n      context.translate(x, y);\n      context.rotate(item.angle * DegToRad);\n      x = y = 0; // reset x, y\n    }\n    x += (item.dx || 0);\n    y += (item.dy || 0) + offset(item);\n\n    tl = textLines(item);\n    blend(context, item);\n    if (isArray(tl)) {\n      lh = lineHeight(item);\n      for (i=0; i<tl.length; ++i) {\n        str = textValue(item, tl[i]);\n        if (item.fill && fill(context, item, opacity)) {\n          context.fillText(str, x, y);\n        }\n        if (item.stroke && stroke(context, item, opacity)) {\n          context.strokeText(str, x, y);\n        }\n        y += lh;\n      }\n    } else {\n      str = textValue(item, tl);\n      if (item.fill && fill(context, item, opacity)) {\n        context.fillText(str, x, y);\n      }\n      if (item.stroke && stroke(context, item, opacity)) {\n        context.strokeText(str, x, y);\n      }\n    }\n\n    if (item.angle) context.restore();\n  });\n}\n\nfunction hit(context, item, x, y, gx, gy) {\n  if (item.fontSize <= 0) return false;\n  if (!item.angle) return true; // bounds sufficient if no rotation\n\n  // project point into space of unrotated bounds\n  var p = anchorPoint(item),\n      ax = p.x1,\n      ay = p.y1,\n      b = bound(tempBounds, item, 1),\n      a = -item.angle * DegToRad,\n      cos = Math.cos(a),\n      sin = Math.sin(a),\n      px = cos * gx - sin * gy + (ax - cos * ax + sin * ay),\n      py = sin * gx + cos * gy + (ay - sin * ax - cos * ay);\n\n  return b.contains(px, py);\n}\n\nfunction intersectText(item, box) {\n  const p = bound(tempBounds, item, 2);\n  return intersectBoxLine(box, p[0], p[1], p[2], p[3])\n      || intersectBoxLine(box, p[0], p[1], p[4], p[5])\n      || intersectBoxLine(box, p[4], p[5], p[6], p[7])\n      || intersectBoxLine(box, p[2], p[3], p[6], p[7]);\n}\n\nexport default {\n  type:   'text',\n  tag:    'text',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   draw,\n  pick:   pick(hit),\n  isect:  intersectText\n};\n","import {trail} from '../path/shapes';\nimport {pickTrail} from '../util/pickPath';\nimport markMultiItemPath from './markMultiItemPath';\n\nexport default markMultiItemPath('trail', trail, pickTrail);\n","import arc from './arc';\nimport area from './area';\nimport group from './group';\nimport image from './image';\nimport line from './line';\nimport path from './path';\nimport rect from './rect';\nimport rule from './rule';\nimport shape from './shape';\nimport symbol from './symbol';\nimport text from './text';\nimport trail from './trail';\n\nexport default {\n  arc:     arc,\n  area:    area,\n  group:   group,\n  image:   image,\n  line:    line,\n  path:    path,\n  rect:    rect,\n  rule:    rule,\n  shape:   shape,\n  symbol:  symbol,\n  text:    text,\n  trail:   trail\n};\n","import Bounds from '../Bounds';\nimport marks from '../marks/index';\n\nexport default function(item, func, opt) {\n  var type = marks[item.mark.marktype],\n      bound = func || type.bound;\n  if (type.nested) item = item.mark;\n\n  return bound(item.bounds || (item.bounds = new Bounds()), item, opt);\n}\n","import Bounds from '../Bounds';\nimport boundItem from './boundItem';\nimport marks from '../marks/index';\n\nvar DUMMY = {mark: null};\n\nexport default function(mark, bounds, opt) {\n  var type  = marks[mark.marktype],\n      bound = type.bound,\n      items = mark.items,\n      hasItems = items && items.length,\n      i, n, item, b;\n\n  if (type.nested) {\n    if (hasItems) {\n      item = items[0];\n    } else {\n      // no items, fake it\n      DUMMY.mark = mark;\n      item = DUMMY;\n    }\n    b = boundItem(item, bound, opt);\n    bounds = bounds && bounds.union(b) || b;\n    return bounds;\n  }\n\n  bounds = bounds\n    || mark.bounds && mark.bounds.clear()\n    || new Bounds();\n\n  if (hasItems) {\n    for (i=0, n=items.length; i<n; ++i) {\n      bounds.union(boundItem(items[i], bound, opt));\n    }\n  }\n\n  return mark.bounds = bounds;\n}\n","import boundMark from '../bound/boundMark';\n\nconst keys = [\n  'marktype', 'name', 'role', 'interactive', 'clip', 'items', 'zindex',\n  'x', 'y', 'width', 'height', 'align', 'baseline',             // layout\n  'fill', 'fillOpacity', 'opacity', 'blend',                    // fill\n  'stroke', 'strokeOpacity', 'strokeWidth', 'strokeCap',        // stroke\n  'strokeDash', 'strokeDashOffset',                             // stroke dash\n  'strokeForeground', 'strokeOffset',                           // group\n  'startAngle', 'endAngle', 'innerRadius', 'outerRadius',       // arc\n  'cornerRadius', 'padAngle',                                   // arc, rect\n  'cornerRadiusTopLeft', 'cornerRadiusTopRight',                // rect, group\n  'cornerRadiusBottomLeft', 'cornerRadiusBottomRight',\n  'interpolate', 'tension', 'orient', 'defined',                // area, line\n  'url', 'aspect', 'smooth',                                    // image\n  'path', 'scaleX', 'scaleY',                                   // path\n  'x2', 'y2',                                                   // rule\n  'size', 'shape',                                              // symbol\n  'text', 'angle', 'theta', 'radius', 'dir', 'dx', 'dy',        // text\n  'ellipsis', 'limit', 'lineBreak', 'lineHeight',\n  'font', 'fontSize', 'fontWeight', 'fontStyle', 'fontVariant', // font\n  'description', 'aria', 'ariaRole', 'ariaRoleDescription'      // aria\n];\n\nexport function sceneToJSON(scene, indent) {\n  return JSON.stringify(scene, keys, indent);\n}\n\nexport function sceneFromJSON(json) {\n  const scene = (typeof json === 'string' ? JSON.parse(json) : json);\n  return initialize(scene);\n}\n\nfunction initialize(scene) {\n  var type = scene.marktype,\n      items = scene.items,\n      parent, i, n;\n\n  if (items) {\n    for (i=0, n=items.length; i<n; ++i) {\n      parent = type ? 'mark' : 'group';\n      items[i][parent] = scene;\n      if (items[i].zindex) items[i][parent].zdirty = true;\n      if ('group' === (type || parent)) initialize(items[i]);\n    }\n  }\n\n  if (type) boundMark(scene);\n  return scene;\n}\n","import Bounds from './Bounds';\nimport GroupItem from './GroupItem';\nimport {sceneFromJSON, sceneToJSON} from './util/serialize';\n\nexport default function Scenegraph(scene) {\n  if (arguments.length) {\n    this.root = sceneFromJSON(scene);\n  } else {\n    this.root = createMark({\n      marktype: 'group',\n      name: 'root',\n      role: 'frame'\n    });\n    this.root.items = [new GroupItem(this.root)];\n  }\n}\n\nScenegraph.prototype = {\n  toJSON(indent) {\n    return sceneToJSON(this.root, indent || 0);\n  },\n\n  mark(markdef, group, index) {\n    group = group || this.root.items[0];\n    const mark = createMark(markdef, group);\n    group.items[index] = mark;\n    if (mark.zindex) mark.group.zdirty = true;\n    return mark;\n  }\n};\n\nfunction createMark(def, group) {\n  const mark = {\n    bounds:      new Bounds(),\n    clip:        !!def.clip,\n    group:       group,\n    interactive: def.interactive === false ? false : true,\n    items:       [],\n    marktype:    def.marktype,\n    name:        def.name || undefined,\n    role:        def.role || undefined,\n    zindex:      def.zindex || 0\n  };\n\n  // add accessibility properties if defined\n  if (def.aria != null) {\n    mark.aria = def.aria;\n  }\n  if (def.description) {\n    mark.description = def.description;\n  }\n\n  return mark;\n}\n","// create a new DOM element\nexport function domCreate(doc, tag, ns) {\n  if (!doc && typeof document !== 'undefined' && document.createElement) {\n    doc = document;\n  }\n  return doc\n    ? (ns ? doc.createElementNS(ns, tag) : doc.createElement(tag))\n    : null;\n}\n\n// find first child element with matching tag\nexport function domFind(el, tag) {\n  tag = tag.toLowerCase();\n  var nodes = el.childNodes, i = 0, n = nodes.length;\n  for (; i<n; ++i) if (nodes[i].tagName.toLowerCase() === tag) {\n    return nodes[i];\n  }\n}\n\n// retrieve child element at given index\n// create & insert if doesn't exist or if tags do not match\nexport function domChild(el, index, tag, ns) {\n  var a = el.childNodes[index], b;\n  if (!a || a.tagName.toLowerCase() !== tag.toLowerCase()) {\n    b = a || null;\n    a = domCreate(el.ownerDocument, tag, ns);\n    el.insertBefore(a, b);\n  }\n  return a;\n}\n\n// remove all child elements at or above the given index\nexport function domClear(el, index) {\n  var nodes = el.childNodes,\n      curr = nodes.length;\n  while (curr > index) el.removeChild(nodes[--curr]);\n  return el;\n}\n\n// generate css class name for mark\nexport function cssClass(mark) {\n  return 'mark-' + mark.marktype\n    + (mark.role ? ' role-' + mark.role : '')\n    + (mark.name ? ' ' + mark.name : '');\n}\n","export default function(event, el) {\n  const rect = el.getBoundingClientRect();\n  return [\n    (event.clientX - rect.left - (el.clientLeft || 0)) / (Math.round(rect.width) / el.clientWidth),\n    (event.clientY - rect.top - (el.clientTop || 0)) / (Math.round(rect.height) / el.clientHeight)\n  ];\n}\n","import {domCreate} from './util/dom';\nimport resolveItem from './util/resolveItem';\nimport {loader} from 'vega-loader';\n\n/**\n * Create a new Handler instance.\n * @param {object} [customLoader] - Optional loader instance for\n *   href URL sanitization. If not specified, a standard loader\n *   instance will be generated.\n * @param {function} [customTooltip] - Optional tooltip handler\n *   function for custom tooltip display.\n * @constructor\n */\nexport default function Handler(customLoader, customTooltip) {\n  this._active = null;\n  this._handlers = {};\n  this._loader = customLoader || loader();\n  this._tooltip = customTooltip || defaultTooltip;\n}\n\n// The default tooltip display handler.\n// Sets the HTML title attribute on the visualization container.\nfunction defaultTooltip(handler, event, item, value) {\n  handler.element().setAttribute('title', value || '');\n}\n\nHandler.prototype = {\n  /**\n   * Initialize a new Handler instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {object} [obj] - Optional context object that should serve as\n   *   the \"this\" context for event callbacks.\n   * @return {Handler} - This handler instance.\n   */\n  initialize(el, origin, obj) {\n    this._el = el;\n    this._obj = obj || null;\n    return this.origin(origin);\n  },\n\n  /**\n   * Returns the parent container element for a visualization.\n   * @return {DOMElement} - The containing DOM element.\n   */\n  element() {\n    return this._el;\n  },\n\n  /**\n   * Returns the scene element (e.g., canvas or SVG) of the visualization\n   * Subclasses must override if the first child is not the scene element.\n   * @return {DOMElement} - The scene (e.g., canvas or SVG) element.\n   */\n  canvas() {\n    return this._el && this._el.firstChild;\n  },\n\n  /**\n   * Get / set the origin coordinates of the visualization.\n   */\n  origin(origin) {\n    if (arguments.length) {\n      this._origin = origin || [0, 0];\n      return this;\n    } else {\n      return this._origin.slice();\n    }\n  },\n\n  /**\n   * Get / set the scenegraph root.\n   */\n  scene(scene) {\n    if (!arguments.length) return this._scene;\n    this._scene = scene;\n    return this;\n  },\n\n  /**\n   * Add an event handler. Subclasses should override this method.\n   */\n  on(/*type, handler*/) {},\n\n  /**\n   * Remove an event handler. Subclasses should override this method.\n   */\n  off(/*type, handler*/) {},\n\n  /**\n   * Utility method for finding the array index of an event handler.\n   * @param {Array} h - An array of registered event handlers.\n   * @param {string} type - The event type.\n   * @param {function} handler - The event handler instance to find.\n   * @return {number} - The handler's array index or -1 if not registered.\n   */\n  _handlerIndex(h, type, handler) {\n    for (let i = h ? h.length : 0; --i>=0;) {\n      if (h[i].type === type && (!handler || h[i].handler === handler)) {\n        return i;\n      }\n    }\n    return -1;\n  },\n\n  /**\n   * Returns an array with registered event handlers.\n   * @param {string} [type] - The event type to query. Any annotations\n   *   are ignored; for example, for the argument \"click.foo\", \".foo\" will\n   *   be ignored and the method returns all \"click\" handlers. If type is\n   *   null or unspecified, this method returns handlers for all types.\n   * @return {Array} - A new array containing all registered event handlers.\n   */\n  handlers(type) {\n    const h = this._handlers, a = [];\n    if (type) {\n      a.push(...h[this.eventName(type)]);\n    } else {\n      for (const k in h) { a.push(...h[k]); }\n    }\n    return a;\n  },\n\n  /**\n   * Parses an event name string to return the specific event type.\n   * For example, given \"click.foo\" returns \"click\"\n   * @param {string} name - The input event type string.\n   * @return {string} - A string with the event type only.\n   */\n  eventName(name) {\n    const i = name.indexOf('.');\n    return i < 0 ? name : name.slice(0, i);\n  },\n\n  /**\n   * Handle hyperlink navigation in response to an item.href value.\n   * @param {Event} event - The event triggering hyperlink navigation.\n   * @param {Item} item - The scenegraph item.\n   * @param {string} href - The URL to navigate to.\n   */\n  handleHref(event, item, href) {\n    this._loader\n      .sanitize(href, {context:'href'})\n      .then(opt => {\n        const e = new MouseEvent(event.type, event),\n              a = domCreate(null, 'a');\n        for (const name in opt) a.setAttribute(name, opt[name]);\n        a.dispatchEvent(e);\n      })\n      .catch(() => { /* do nothing */ });\n  },\n\n  /**\n   * Handle tooltip display in response to an item.tooltip value.\n   * @param {Event} event - The event triggering tooltip display.\n   * @param {Item} item - The scenegraph item.\n   * @param {boolean} show - A boolean flag indicating whether\n   *   to show or hide a tooltip for the given item.\n   */\n  handleTooltip(event, item, show) {\n    if (item && item.tooltip != null) {\n      item = resolveItem(item, event, this.canvas(), this._origin);\n      const value = (show && item && item.tooltip) || null;\n      this._tooltip.call(this._obj, this, event, item, value);\n    }\n  },\n\n  /**\n   * Returns the size of a scenegraph item and its position relative\n   * to the viewport.\n   * @param {Item} item - The scenegraph item.\n   * @return {object} - A bounding box object (compatible with the\n   *   DOMRect type) consisting of x, y, width, heigh, top, left,\n   *   right, and bottom properties.\n   */\n  getItemBoundingClientRect(item) {\n    const el = this.canvas();\n    if (!el) return;\n\n    const rect = el.getBoundingClientRect(),\n          origin = this._origin,\n          bounds = item.bounds,\n          width = bounds.width(),\n          height = bounds.height();\n\n    let x = bounds.x1 + origin[0] + rect.left,\n        y = bounds.y1 + origin[1] + rect.top;\n\n    // translate coordinate for each parent group\n    while (item.mark && (item = item.mark.group)) {\n      x += item.x || 0;\n      y += item.y || 0;\n    }\n\n    // return DOMRect-compatible bounding box\n    return {\n      x, y, width, height,\n      left: x, top: y, right: x + width, bottom: y + height\n    };\n  }\n};\n","import ResourceLoader from './ResourceLoader';\n\n/**\n * Create a new Renderer instance.\n * @param {object} [loader] - Optional loader instance for\n *   image and href URL sanitization. If not specified, a\n *   standard loader instance will be generated.\n * @constructor\n */\nexport default function Renderer(loader) {\n  this._el = null;\n  this._bgcolor = null;\n  this._loader = new ResourceLoader(loader);\n}\n\nRenderer.prototype = {\n  /**\n   * Initialize a new Renderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {Renderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    this._el = el;\n    return this.resize(width, height, origin, scaleFactor);\n  },\n\n  /**\n   * Returns the parent container element for a visualization.\n   * @return {DOMElement} - The containing DOM element.\n   */\n  element() {\n    return this._el;\n  },\n\n  /**\n   * Returns the scene element (e.g., canvas or SVG) of the visualization\n   * Subclasses must override if the first child is not the scene element.\n   * @return {DOMElement} - The scene (e.g., canvas or SVG) element.\n   */\n  canvas() {\n    return this._el && this._el.firstChild;\n  },\n\n  /**\n   * Get / set the background color.\n   */\n  background(bgcolor) {\n    if (arguments.length === 0) return this._bgcolor;\n    this._bgcolor = bgcolor;\n    return this;\n  },\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {Renderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    this._width = width;\n    this._height = height;\n    this._origin = origin || [0, 0];\n    this._scale = scaleFactor || 1;\n    return this;\n  },\n\n  /**\n   * Report a dirty item whose bounds should be redrawn.\n   * This base class method does nothing. Subclasses that perform\n   * incremental should implement this method.\n   * @param {Item} item - The dirty item whose bounds should be redrawn.\n   */\n  dirty(/*item*/) {},\n\n  /**\n   * Render an input scenegraph, potentially with a set of dirty items.\n   * This method will perform an immediate rendering with available resources.\n   * The renderer may also need to perform image loading to perform a complete\n   * render. This process can lead to asynchronous re-rendering of the scene\n   * after this method returns. To receive notification when rendering is\n   * complete, use the renderAsync method instead.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @return {Renderer} - This renderer instance.\n   */\n  render(scene) {\n    const r = this;\n\n    // bind arguments into a render call, and cache it\n    // this function may be subsequently called for async redraw\n    r._call = function() { r._render(scene); };\n\n    // invoke the renderer\n    r._call();\n\n    // clear the cached call for garbage collection\n    // async redraws will stash their own copy\n    r._call = null;\n\n    return r;\n  },\n\n  /**\n   * Internal rendering method. Renderer subclasses should override this\n   * method to actually perform rendering.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   */\n  _render(/*scene*/) {\n    // subclasses to override\n  },\n\n  /**\n   * Asynchronous rendering method. Similar to render, but returns a Promise\n   * that resolves when all rendering is completed. Sometimes a renderer must\n   * perform image loading to get a complete rendering. The returned\n   * Promise will not resolve until this process completes.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @return {Promise} - A Promise that resolves when rendering is complete.\n   */\n  renderAsync(scene) {\n    const r = this.render(scene);\n    return this._ready\n      ? this._ready.then(() => r)\n      : Promise.resolve(r);\n  },\n\n  /**\n   * Internal method for asynchronous resource loading.\n   * Proxies method calls to the ImageLoader, and tracks loading\n   * progress to invoke a re-render once complete.\n   * @param {string} method - The method name to invoke on the ImageLoader.\n   * @param {string} uri - The URI for the requested resource.\n   * @return {Promise} - A Promise that resolves to the requested resource.\n   */\n  _load(method, uri) {\n    var r = this,\n        p = r._loader[method](uri);\n\n    if (!r._ready) {\n      // re-render the scene when loading completes\n      const call = r._call;\n      r._ready = r._loader.ready()\n        .then(redraw => {\n          if (redraw) call();\n          r._ready = null;\n        });\n    }\n\n    return p;\n  },\n\n  /**\n   * Sanitize a URL to include as a hyperlink in the rendered scene.\n   * This method proxies a call to ImageLoader.sanitizeURL, but also tracks\n   * image loading progress and invokes a re-render once complete.\n   * @param {string} uri - The URI string to sanitize.\n   * @return {Promise} - A Promise that resolves to the sanitized URL.\n   */\n  sanitizeURL(uri) {\n    return this._load('sanitizeURL', uri);\n  },\n\n  /**\n   * Requests an image to include in the rendered scene.\n   * This method proxies a call to ImageLoader.loadImage, but also tracks\n   * image loading progress and invokes a re-render once complete.\n   * @param {string} uri - The URI string of the image.\n   * @return {Promise} - A Promise that resolves to the loaded Image.\n   */\n  loadImage(uri) {\n    return this._load('loadImage', uri);\n  }\n};\n","import marks from '../marks/index';\nimport point from './point';\n\nexport default function(item, event, el, origin) {\n  var mark = item && item.mark,\n      mdef, p;\n\n  if (mark && (mdef = marks[mark.marktype]).tip) {\n    p = point(event, el);\n    p[0] -= origin[0];\n    p[1] -= origin[1];\n    while (item = item.mark.group) {\n      p[0] -= item.x || 0;\n      p[1] -= item.y || 0;\n    }\n    item = mdef.tip(mark.items, p);\n  }\n\n  return item;\n}\n","export const KeyDownEvent = 'keydown';\nexport const KeyPressEvent = 'keypress';\nexport const KeyUpEvent = 'keyup';\nexport const DragEnterEvent = 'dragenter';\nexport const DragLeaveEvent = 'dragleave';\nexport const DragOverEvent = 'dragover';\nexport const MouseDownEvent = 'mousedown';\nexport const MouseUpEvent = 'mouseup';\nexport const MouseMoveEvent = 'mousemove';\nexport const MouseOutEvent = 'mouseout';\nexport const MouseOverEvent = 'mouseover';\nexport const ClickEvent = 'click';\nexport const DoubleClickEvent = 'dblclick';\nexport const WheelEvent = 'wheel';\nexport const MouseWheelEvent = 'mousewheel';\nexport const TouchStartEvent = 'touchstart';\nexport const TouchMoveEvent = 'touchmove';\nexport const TouchEndEvent = 'touchend';\n\nexport const Events = [\n  KeyDownEvent,\n  KeyPressEvent,\n  KeyUpEvent,\n  DragEnterEvent,\n  DragLeaveEvent,\n  DragOverEvent,\n  MouseDownEvent,\n  MouseUpEvent,\n  MouseMoveEvent,\n  MouseOutEvent,\n  MouseOverEvent,\n  ClickEvent,\n  DoubleClickEvent,\n  WheelEvent,\n  MouseWheelEvent,\n  TouchStartEvent,\n  TouchMoveEvent,\n  TouchEndEvent\n];\n\nexport const TooltipShowEvent = MouseMoveEvent;\n\nexport const TooltipHideEvent = MouseOutEvent;\n\nexport const HrefEvent = ClickEvent;\n","import Handler from './Handler';\nimport Marks from './marks/index';\nimport {\n  ClickEvent, DragEnterEvent, DragLeaveEvent, DragOverEvent, Events,\n  HrefEvent, MouseDownEvent, MouseMoveEvent, MouseOutEvent, MouseOverEvent,\n  MouseWheelEvent, TooltipHideEvent, TooltipShowEvent,\n  TouchEndEvent, TouchMoveEvent, TouchStartEvent\n} from './util/events';\nimport point from './util/point';\nimport {domFind} from './util/dom';\nimport {inherits} from 'vega-util';\n\nexport default function CanvasHandler(loader, tooltip) {\n  Handler.call(this, loader, tooltip);\n  this._down = null;\n  this._touch = null;\n  this._first = true;\n  this._events = {};\n}\n\nconst eventBundle = type => (\n  type === TouchStartEvent ||\n  type === TouchMoveEvent ||\n  type === TouchEndEvent\n)\n? [TouchStartEvent, TouchMoveEvent, TouchEndEvent]\n: [type];\n\n// lazily add listeners to the canvas as needed\nfunction eventListenerCheck(handler, type) {\n  eventBundle(type).forEach(_ => addEventListener(handler, _));\n}\n\nfunction addEventListener(handler, type) {\n  const canvas = handler.canvas();\n  if (canvas && !handler._events[type]) {\n    handler._events[type] = 1;\n    canvas.addEventListener(type, handler[type]\n      ? evt => handler[type](evt)\n      : evt => handler.fire(type, evt)\n    );\n  }\n}\n\nfunction move(moveEvent, overEvent, outEvent) {\n  return function(evt) {\n    const a = this._active,\n          p = this.pickEvent(evt);\n\n    if (p === a) {\n      // active item and picked item are the same\n      this.fire(moveEvent, evt); // fire move\n    } else {\n      // active item and picked item are different\n      if (!a || !a.exit) {\n        // fire out for prior active item\n        // suppress if active item was removed from scene\n        this.fire(outEvent, evt);\n      }\n      this._active = p;          // set new active item\n      this.fire(overEvent, evt); // fire over for new active item\n      this.fire(moveEvent, evt); // fire move for new active item\n    }\n  };\n}\n\nfunction inactive(type) {\n  return function(evt) {\n    this.fire(type, evt);\n    this._active = null;\n  };\n}\n\ninherits(CanvasHandler, Handler, {\n  initialize(el, origin, obj) {\n    this._canvas = el && domFind(el, 'canvas');\n\n    // add minimal events required for proper state management\n    [ClickEvent, MouseDownEvent, MouseMoveEvent, MouseOutEvent, DragLeaveEvent]\n      .forEach(type => eventListenerCheck(this, type));\n\n    return Handler.prototype.initialize.call(this, el, origin, obj);\n  },\n\n  // return the backing canvas instance\n  canvas() {\n    return this._canvas;\n  },\n\n  // retrieve the current canvas context\n  context() {\n    return this._canvas.getContext('2d');\n  },\n\n  // supported events\n  events: Events,\n\n  // to keep old versions of firefox happy\n  DOMMouseScroll(evt) {\n    this.fire(MouseWheelEvent, evt);\n  },\n\n  mousemove: move(MouseMoveEvent, MouseOverEvent, MouseOutEvent),\n  dragover: move(DragOverEvent, DragEnterEvent, DragLeaveEvent),\n\n  mouseout: inactive(MouseOutEvent),\n  dragleave: inactive(DragLeaveEvent),\n\n  mousedown(evt) {\n    this._down = this._active;\n    this.fire(MouseDownEvent, evt);\n  },\n\n  click(evt) {\n    if (this._down === this._active) {\n      this.fire(ClickEvent, evt);\n      this._down = null;\n    }\n  },\n\n  touchstart(evt) {\n    this._touch = this.pickEvent(evt.changedTouches[0]);\n\n    if (this._first) {\n      this._active = this._touch;\n      this._first = false;\n    }\n\n    this.fire(TouchStartEvent, evt, true);\n  },\n\n  touchmove(evt) {\n    this.fire(TouchMoveEvent, evt, true);\n  },\n\n  touchend(evt) {\n    this.fire(TouchEndEvent, evt, true);\n    this._touch = null;\n  },\n\n  // fire an event\n  fire(type, evt, touch) {\n    const a = touch ? this._touch : this._active,\n          h = this._handlers[type];\n\n    // set event type relative to scenegraph items\n    evt.vegaType = type;\n\n    // handle hyperlinks and tooltips first\n    if (type === HrefEvent && a && a.href) {\n      this.handleHref(evt, a, a.href);\n    } else if (type === TooltipShowEvent || type === TooltipHideEvent) {\n      this.handleTooltip(evt, a, type !== TooltipHideEvent);\n    }\n\n    // invoke all registered handlers\n    if (h) {\n      for (let i=0, len=h.length; i<len; ++i) {\n        h[i].handler.call(this._obj, evt, a);\n      }\n    }\n  },\n\n  // add an event handler\n  on(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers,\n          i = this._handlerIndex(h[name], type, handler);\n\n    if (i < 0) {\n      eventListenerCheck(this, type);\n      (h[name] || (h[name] = [])).push({\n        type:    type,\n        handler: handler\n      });\n    }\n\n    return this;\n  },\n\n  // remove an event handler\n  off(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers[name],\n          i = this._handlerIndex(h, type, handler);\n\n    if (i >= 0) {\n      h.splice(i, 1);\n    }\n\n    return this;\n  },\n\n  pickEvent(evt) {\n    const p = point(evt, this._canvas),\n          o = this._origin;\n    return this.pick(this._scene, p[0], p[1], p[0] - o[0], p[1] - o[1]);\n  },\n\n  // find the scenegraph item at the current mouse position\n  // x, y -- the absolute x, y mouse coordinates on the canvas element\n  // gx, gy -- the relative coordinates within the current group\n  pick(scene, x, y, gx, gy) {\n    const g = this.context(),\n          mark = Marks[scene.marktype];\n    return mark.pick.call(this, g, scene, x, y, gx, gy);\n  }\n});\n","function devicePixelRatio() {\n  return typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1;\n}\n\nvar pixelRatio = devicePixelRatio();\n\nexport default function(canvas, width, height, origin, scaleFactor, opt) {\n  const inDOM = typeof HTMLElement !== 'undefined'\n              && canvas instanceof HTMLElement\n              && canvas.parentNode != null,\n        context = canvas.getContext('2d'),\n        ratio = inDOM ? pixelRatio : scaleFactor;\n\n  canvas.width = width * ratio;\n  canvas.height = height * ratio;\n\n  for (const key in opt) {\n    context[key] = opt[key];\n  }\n\n  if (inDOM && ratio !== 1) {\n    canvas.style.width = width + 'px';\n    canvas.style.height = height + 'px';\n  }\n\n  context.pixelRatio = ratio;\n  context.setTransform(\n    ratio, 0, 0, ratio,\n    ratio * origin[0],\n    ratio * origin[1]\n  );\n\n  return canvas;\n}\n","import Renderer from './Renderer';\nimport Bounds from './Bounds';\nimport marks from './marks/index';\n\nimport {domClear} from './util/dom';\nimport clip from './util/canvas/clip';\nimport resize from './util/canvas/resize';\nimport {canvas} from 'vega-canvas';\nimport {error, inherits} from 'vega-util';\n\nexport default function CanvasRenderer(loader) {\n  Renderer.call(this, loader);\n  this._options = {};\n  this._redraw = false;\n  this._dirty = new Bounds();\n  this._tempb = new Bounds();\n}\n\nconst base = Renderer.prototype;\n\nconst viewBounds = (origin, width, height) => new Bounds()\n  .set(0, 0, width, height)\n  .translate(-origin[0], -origin[1]);\n\nfunction clipToBounds(g, b, origin) {\n  // expand bounds by 1 pixel, then round to pixel boundaries\n  b.expand(1).round();\n\n  // align to base pixel grid in case of non-integer scaling (#2425)\n  if (g.pixelRatio % 1) {\n    b.scale(g.pixelRatio).round().scale(1 / g.pixelRatio);\n  }\n\n  // to avoid artifacts translate if origin has fractional pixels\n  b.translate(-(origin[0] % 1), -(origin[1] % 1));\n\n  // set clip path\n  g.beginPath();\n  g.rect(b.x1, b.y1, b.width(), b.height());\n  g.clip();\n\n  return b;\n}\n\ninherits(CanvasRenderer, Renderer, {\n  initialize(el, width, height, origin, scaleFactor, options) {\n    this._options = options || {};\n\n    this._canvas = this._options.externalContext\n      ? null\n      : canvas(1, 1, this._options.type); // instantiate a small canvas\n\n    if (el && this._canvas) {\n      domClear(el, 0).appendChild(this._canvas);\n      this._canvas.setAttribute('class', 'marks');\n    }\n\n    // this method will invoke resize to size the canvas appropriately\n    return base.initialize.call(this, el, width, height, origin, scaleFactor);\n  },\n\n  resize(width, height, origin, scaleFactor) {\n    base.resize.call(this, width, height, origin, scaleFactor);\n\n    if (this._canvas) {\n      // configure canvas size and transform\n      resize(this._canvas, this._width, this._height,\n        this._origin, this._scale, this._options.context);\n    } else {\n      // external context needs to be scaled and positioned to origin\n      const ctx = this._options.externalContext;\n      if (!ctx) error('CanvasRenderer is missing a valid canvas or context');\n      ctx.scale(this._scale, this._scale);\n      ctx.translate(this._origin[0], this._origin[1]);\n    }\n\n    this._redraw = true;\n    return this;\n  },\n\n  canvas() {\n    return this._canvas;\n  },\n\n  context() {\n    return this._options.externalContext\n      || (this._canvas ? this._canvas.getContext('2d') : null);\n  },\n\n  dirty(item) {\n    const b = this._tempb.clear().union(item.bounds);\n    let g = item.mark.group;\n\n    while (g) {\n      b.translate(g.x || 0, g.y || 0);\n      g = g.mark.group;\n    }\n\n    this._dirty.union(b);\n  },\n\n  _render(scene) {\n    const g = this.context(),\n          o = this._origin,\n          w = this._width,\n          h = this._height,\n          db = this._dirty,\n          vb = viewBounds(o, w, h);\n\n    // setup\n    g.save();\n    const b = this._redraw || db.empty()\n      ? (this._redraw = false, vb.expand(1))\n      : clipToBounds(g, vb.intersect(db), o);\n\n    this.clear(-o[0], -o[1], w, h);\n\n    // render\n    this.draw(g, scene, b);\n\n    // takedown\n    g.restore();\n    db.clear();\n\n    return this;\n  },\n\n  draw(ctx, scene, bounds) {\n    const mark = marks[scene.marktype];\n    if (scene.clip) clip(ctx, scene);\n    mark.draw.call(this, ctx, scene, bounds);\n    if (scene.clip) ctx.restore();\n  },\n\n  clear(x, y, w, h) {\n    const opt = this._options,\n          g = this.context();\n\n    if (opt.type !== 'pdf' && !opt.externalContext) {\n      // calling clear rect voids vector output in pdf mode\n      // and could remove external context content (#2615)\n      g.clearRect(x, y, w, h);\n    }\n\n    if (this._bgcolor != null) {\n      g.fillStyle = this._bgcolor;\n      g.fillRect(x, y, w, h);\n    }\n  }\n});\n","import Handler from './Handler';\nimport {domFind} from './util/dom';\nimport {HrefEvent, TooltipHideEvent, TooltipShowEvent} from './util/events';\nimport {inherits} from 'vega-util';\n\nexport default function SVGHandler(loader, tooltip) {\n  Handler.call(this, loader, tooltip);\n  const h = this;\n  h._hrefHandler = listener(h, (evt, item) => {\n    if (item && item.href) h.handleHref(evt, item, item.href);\n  });\n  h._tooltipHandler = listener(h, (evt, item) => {\n    h.handleTooltip(evt, item, evt.type !== TooltipHideEvent);\n  });\n}\n\n// wrap an event listener for the SVG DOM\nconst listener = (context, handler) => evt => {\n  let item = evt.target.__data__;\n  item = Array.isArray(item) ? item[0] : item;\n  evt.vegaType = evt.type;\n  handler.call(context._obj, evt, item);\n};\n\ninherits(SVGHandler, Handler, {\n  initialize(el, origin, obj) {\n    let svg = this._svg;\n    if (svg) {\n      svg.removeEventListener(HrefEvent, this._hrefHandler);\n      svg.removeEventListener(TooltipShowEvent, this._tooltipHandler);\n      svg.removeEventListener(TooltipHideEvent, this._tooltipHandler);\n    }\n    this._svg = svg = el && domFind(el, 'svg');\n    if (svg) {\n      svg.addEventListener(HrefEvent, this._hrefHandler);\n      svg.addEventListener(TooltipShowEvent, this._tooltipHandler);\n      svg.addEventListener(TooltipHideEvent, this._tooltipHandler);\n    }\n    return Handler.prototype.initialize.call(this, el, origin, obj);\n  },\n\n  canvas() {\n    return this._svg;\n  },\n\n  // add an event handler\n  on(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers,\n          i = this._handlerIndex(h[name], type, handler);\n\n    if (i < 0) {\n      const x = {\n        type,\n        handler,\n        listener: listener(this, handler)\n      };\n\n      (h[name] || (h[name] = [])).push(x);\n      if (this._svg) {\n        this._svg.addEventListener(name, x.listener);\n      }\n    }\n\n    return this;\n  },\n\n  // remove an event handler\n  off(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers[name],\n          i = this._handlerIndex(h, type, handler);\n\n    if (i >= 0) {\n      if (this._svg) {\n        this._svg.removeEventListener(name, h[i].listener);\n      }\n      h.splice(i, 1);\n    }\n\n    return this;\n  }\n});","import {domainCaption, isDiscrete} from 'vega-scale';\nimport {array, peek, toSet} from 'vega-util';\n\nconst ARIA_HIDDEN = 'aria-hidden';\nconst ARIA_LABEL = 'aria-label';\nconst ARIA_ROLE = 'role';\nconst ARIA_ROLEDESCRIPTION = 'aria-roledescription';\nconst GRAPHICS_OBJECT = 'graphics-object';\nconst GRAPHICS_SYMBOL = 'graphics-symbol';\n\nconst bundle = (role, roledesc, label) => ({\n  [ARIA_ROLE]: role,\n  [ARIA_ROLEDESCRIPTION]: roledesc,\n  [ARIA_LABEL]: label || undefined\n});\n\n// these roles are covered by related roles\n// we can ignore them, no need to generate attributes\nconst AriaIgnore = toSet([\n  'axis-domain',\n  'axis-grid',\n  'axis-label',\n  'axis-tick',\n  'axis-title',\n  'legend-band',\n  'legend-entry',\n  'legend-gradient',\n  'legend-label',\n  'legend-title',\n  'legend-symbol',\n  'title'\n]);\n\n// aria attribute generators for guide roles\nconst AriaGuides = {\n  'axis': {desc: 'axis', caption: axisCaption},\n  'legend': {desc: 'legend', caption: legendCaption},\n  'title-text': {\n    desc: 'title',\n    caption: item => `Title text '${titleCaption(item)}'`\n  },\n  'title-subtitle': {\n    desc: 'subtitle',\n    caption: item => `Subtitle text '${titleCaption(item)}'`\n  }\n};\n\n// aria properties generated for mark item encoding channels\nexport const AriaEncode = {\n  ariaRole: ARIA_ROLE,\n  ariaRoleDescription: ARIA_ROLEDESCRIPTION,\n  description: ARIA_LABEL\n};\n\nexport function ariaItemAttributes(emit, item) {\n  const hide = item.aria === false;\n  emit(ARIA_HIDDEN, hide || undefined);\n\n  if (hide || item.description == null) {\n    for (const prop in AriaEncode) {\n      emit(AriaEncode[prop], undefined);\n    }\n  } else {\n    const type = item.mark.marktype;\n    emit(\n      ARIA_LABEL,\n      item.description\n    );\n    emit(\n      ARIA_ROLE,\n      item.ariaRole || (type === 'group' ? GRAPHICS_OBJECT : GRAPHICS_SYMBOL)\n    );\n    emit(\n      ARIA_ROLEDESCRIPTION,\n      item.ariaRoleDescription || `${type} mark`\n    );\n  }\n}\n\nexport function ariaMarkAttributes(mark) {\n  return mark.aria === false ? { [ARIA_HIDDEN]: true }\n    : AriaIgnore[mark.role] ? null\n    : AriaGuides[mark.role] ? ariaGuide(mark, AriaGuides[mark.role])\n    : ariaMark(mark);\n}\n\nfunction ariaMark(mark) {\n  const type = mark.marktype;\n  const recurse = (\n    type === 'group' ||\n    type === 'text' ||\n    mark.items.some(_ => _.description != null && _.aria !== false)\n  );\n  return bundle(\n    recurse ? GRAPHICS_OBJECT : GRAPHICS_SYMBOL,\n    `${type} mark container`,\n    mark.description\n  );\n}\n\nfunction ariaGuide(mark, opt) {\n  try {\n    const item = mark.items[0],\n          caption = opt.caption || (() => '');\n    return bundle(\n      opt.role || GRAPHICS_SYMBOL,\n      opt.desc,\n      item.description || caption(item)\n    );\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction titleCaption(item) {\n  return array(item.text).join(' ');\n}\n\nfunction axisCaption(item) {\n  const datum = item.datum,\n        orient = item.orient,\n        title = datum.title ? extractTitle(item) : null,\n        ctx = item.context,\n        scale = ctx.scales[datum.scale].value,\n        locale = ctx.dataflow.locale(),\n        type = scale.type,\n        xy = (orient === 'left' || orient === 'right') ? 'Y' : 'X';\n\n  return `${xy}-axis`\n    + (title ? ` titled '${title}'` : '')\n    + ` for a ${isDiscrete(type) ? 'discrete' : type} scale`\n    + ` with ${domainCaption(locale, scale, item)}`;\n}\n\nfunction legendCaption(item) {\n  const datum = item.datum,\n        title = datum.title ? extractTitle(item) : null,\n        type = `${datum.type || ''} legend`.trim(),\n        scales = datum.scales,\n        props = Object.keys(scales),\n        ctx = item.context,\n        scale = ctx.scales[scales[props[0]]].value,\n        locale = ctx.dataflow.locale();\n\n  return capitalize(type)\n    + (title ? ` titled '${title}'` : '')\n    + ` for ${channelCaption(props)}`\n    + ` with ${domainCaption(locale, scale, item)}`;\n}\n\nfunction extractTitle(item) {\n  try {\n    return array(peek(item.items).items[0].text).join(' ');\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction channelCaption(props) {\n  props = props.map(p => p + (p === 'fill' || p === 'stroke' ? ' color' : ''));\n  return props.length < 2 ? props[0]\n    : props.slice(0, -1).join(', ') + ' and ' + peek(props);\n}\n\nfunction capitalize(s) {\n  return s.length ? s[0].toUpperCase() + s.slice(1) : s;\n}\n","const innerText = val => (val + '')\n  .replace(/&/g, '&amp;')\n  .replace(/</g, '&lt;')\n  .replace(/>/g, '&gt;');\n\nconst attrText = val => innerText(val)\n  .replace(/\"/g, '&quot;')\n  .replace(/\\t/g, '&#x9;')\n  .replace(/\\n/g, '&#xA;')\n  .replace(/\\r/g, '&#xD;');\n\nexport function markup() {\n  let buf = '',\n      outer = '',\n      inner = '';\n\n  const stack = [],\n        clear = () => outer = inner = '',\n        push = tag => {\n          if (outer) { buf += `${outer}>${inner}`; clear(); }\n          stack.push(tag);\n        },\n        attr = (name, value) => {\n          if (value != null) outer += ` ${name}=\"${attrText(value)}\"`;\n          return m;\n        },\n\n        m = {\n          open(tag, ...attrs) {\n            push(tag);\n            outer = '<' + tag;\n            for (const set of attrs) {\n              for (const key in set) attr(key, set[key]);\n            }\n            return m;\n          },\n          close() {\n            const tag = stack.pop();\n            if (outer) {\n              buf += outer + (inner\n                ? `>${inner}</${tag}>`\n                : '/>');\n            } else {\n              buf += `</${tag}>`;\n            }\n            clear();\n            return m;\n          },\n          attr,\n          text: t => (inner += innerText(t), m),\n          toString: () => buf\n        };\n\n  return m;\n}\n\nexport const serializeXML = node =>\n  _serialize(markup(), node) + '';\n\nfunction _serialize(m, node) {\n  m.open(node.tagName);\n\n  if (node.hasAttributes()) {\n    const attrs = node.attributes,\n          n = attrs.length;\n    for (let i=0; i<n; ++i) {\n      m.attr(attrs[i].name, attrs[i].value);\n    }\n  }\n\n  if (node.hasChildNodes()) {\n    const children = node.childNodes;\n\n    for (const child of children) {\n      child.nodeType === 3 // text node\n        ? m.text(child.nodeValue)\n        : _serialize(m, child);\n    }\n  }\n\n  return m.close();\n}\n","export const stylesAttr = {\n  fill:             'fill',\n  fillOpacity:      'fill-opacity',\n  stroke:           'stroke',\n  strokeOpacity:    'stroke-opacity',\n  strokeWidth:      'stroke-width',\n  strokeCap:        'stroke-linecap',\n  strokeJoin:       'stroke-linejoin',\n  strokeDash:       'stroke-dasharray',\n  strokeDashOffset: 'stroke-dashoffset',\n  strokeMiterLimit: 'stroke-miterlimit',\n  opacity:          'opacity'\n};\n\nexport const stylesCss = {\n  blend:            'mix-blend-mode'\n};\n\n// ensure miter limit default is consistent with canvas (#2498)\nexport const rootAttributes = {\n  'fill': 'none',\n  'stroke-miterlimit': 10\n};\n","import Renderer from './Renderer';\nimport {gradientRef, isGradient, patternPrefix} from './Gradient';\nimport marks from './marks/index';\nimport {ariaItemAttributes, ariaMarkAttributes} from './util/aria';\nimport {cssClass, domChild, domClear, domCreate} from './util/dom';\nimport {serializeXML} from './util/markup';\nimport {fontFamily, fontSize, lineHeight, textLines, textValue} from './util/text';\nimport {visit} from './util/visit';\nimport clip from './util/svg/clip';\nimport metadata from './util/svg/metadata';\nimport {rootAttributes, stylesAttr, stylesCss} from './util/svg/styles';\nimport {inherits, isArray} from 'vega-util';\n\nconst RootIndex = 0,\n      xmlns = 'http://www.w3.org/2000/xmlns/',\n      svgns = metadata.xmlns;\n\nexport default function SVGRenderer(loader) {\n  Renderer.call(this, loader);\n  this._dirtyID = 0;\n  this._dirty = [];\n  this._svg = null;\n  this._root = null;\n  this._defs = null;\n}\n\nconst base = Renderer.prototype;\n\ninherits(SVGRenderer, Renderer, {\n  /**\n   * Initialize a new SVGRenderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    // create the svg definitions cache\n    this._defs = {};\n    this._clearDefs();\n\n    if (el) {\n      this._svg = domChild(el, 0, 'svg', svgns);\n      this._svg.setAttributeNS(xmlns, 'xmlns', svgns);\n      this._svg.setAttributeNS(xmlns, 'xmlns:xlink', metadata['xmlns:xlink']);\n      this._svg.setAttribute('version', metadata['version']);\n      this._svg.setAttribute('class', 'marks');\n      domClear(el, 1);\n\n      // set the svg root group\n      this._root = domChild(this._svg, RootIndex, 'g', svgns);\n      setAttributes(this._root, rootAttributes);\n\n      // ensure no additional child elements\n      domClear(this._svg, RootIndex + 1);\n    }\n\n    // set background color if defined\n    this.background(this._bgcolor);\n\n    return base.initialize.call(this, el, width, height, origin, scaleFactor);\n  },\n\n  /**\n   * Get / set the background color.\n   */\n  background(bgcolor) {\n    if (arguments.length && this._svg) {\n      this._svg.style.setProperty('background-color', bgcolor);\n    }\n    return base.background.apply(this, arguments);\n  },\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    base.resize.call(this, width, height, origin, scaleFactor);\n\n    if (this._svg) {\n      setAttributes(this._svg, {\n        width: this._width * this._scale,\n        height: this._height * this._scale,\n        viewBox: `0 0 ${this._width} ${this._height}`\n      });\n      this._root.setAttribute('transform', `translate(${this._origin})`);\n    }\n\n    this._dirty = [];\n\n    return this;\n  },\n\n  /**\n   * Returns the SVG element of the visualization.\n   * @return {DOMElement} - The SVG element.\n   */\n  canvas() {\n    return this._svg;\n  },\n\n  /**\n   * Returns an SVG text string for the rendered content,\n   * or null if this renderer is currently headless.\n   */\n  svg() {\n    const svg = this._svg,\n          bg = this._bgcolor;\n\n    if (!svg) return null;\n\n    let node;\n    if (bg) {\n      svg.removeAttribute('style');\n      node = domChild(svg, RootIndex, 'rect', svgns);\n      setAttributes(node, {width: this._width, height: this._height, fill: bg});\n    }\n\n    const text = serializeXML(svg);\n\n    if (bg) {\n      svg.removeChild(node);\n      this._svg.style.setProperty('background-color', bg);\n    }\n\n    return text;\n  },\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   */\n  _render(scene) {\n    // perform spot updates and re-render markup\n    if (this._dirtyCheck()) {\n      if (this._dirtyAll) this._clearDefs();\n      this.mark(this._root, scene);\n      domClear(this._root, 1);\n    }\n\n    this.defs();\n\n    this._dirty = [];\n    ++this._dirtyID;\n\n    return this;\n  },\n\n  // -- Manage rendering of items marked as dirty --\n\n  /**\n   * Flag a mark item as dirty.\n   * @param {Item} item - The mark item.\n   */\n  dirty(item) {\n    if (item.dirty !== this._dirtyID) {\n      item.dirty = this._dirtyID;\n      this._dirty.push(item);\n    }\n  },\n\n  /**\n   * Check if a mark item is considered dirty.\n   * @param {Item} item - The mark item.\n   */\n  isDirty(item) {\n    return this._dirtyAll\n      || !item._svg\n      || !item._svg.ownerSVGElement\n      || item.dirty === this._dirtyID;\n  },\n\n  /**\n   * Internal method to check dirty status and, if possible,\n   * make targetted updates without a full rendering pass.\n   */\n  _dirtyCheck() {\n    this._dirtyAll = true;\n    const items = this._dirty;\n    if (!items.length || !this._dirtyID) return true;\n\n    const id = ++this._dirtyID;\n    let item, mark, type, mdef, i, n, o;\n\n    for (i=0, n=items.length; i<n; ++i) {\n      item = items[i];\n      mark = item.mark;\n\n      if (mark.marktype !== type) {\n        // memoize mark instance lookup\n        type = mark.marktype;\n        mdef = marks[type];\n      }\n\n      if (mark.zdirty && mark.dirty !== id) {\n        this._dirtyAll = false;\n        dirtyParents(item, id);\n        mark.items.forEach(i => { i.dirty = id; });\n      }\n      if (mark.zdirty) continue; // handle in standard drawing pass\n\n      if (item.exit) { // EXIT\n        if (mdef.nested && mark.items.length) {\n          // if nested mark with remaining points, update instead\n          o = mark.items[0];\n          if (o._svg) this._update(mdef, o._svg, o);\n        } else if (item._svg) {\n          // otherwise remove from DOM\n          o = item._svg.parentNode;\n          if (o) o.removeChild(item._svg);\n        }\n        item._svg = null;\n        continue;\n      }\n\n      item = (mdef.nested ? mark.items[0] : item);\n      if (item._update === id) continue; // already visited\n\n      if (!item._svg || !item._svg.ownerSVGElement) {\n        // ENTER\n        this._dirtyAll = false;\n        dirtyParents(item, id);\n      } else {\n        // IN-PLACE UPDATE\n        this._update(mdef, item._svg, item);\n      }\n      item._update = id;\n    }\n    return !this._dirtyAll;\n  },\n\n  // -- Construct & maintain scenegraph to SVG mapping ---\n\n  /**\n   * Render a set of mark items.\n   * @param {SVGElement} el - The parent element in the SVG tree.\n   * @param {object} scene - The mark parent to render.\n   * @param {SVGElement} prev - The previous sibling in the SVG tree.\n   */\n  mark(el, scene, prev) {\n    if (!this.isDirty(scene)) {\n      return scene._svg;\n    }\n\n    const svg = this._svg,\n          mdef = marks[scene.marktype],\n          events = scene.interactive === false ? 'none' : null,\n          isGroup = mdef.tag === 'g';\n\n    const parent = bind(scene, el, prev, 'g', svg);\n    parent.setAttribute('class', cssClass(scene));\n\n    // apply aria attributes to parent container element\n    const aria = ariaMarkAttributes(scene);\n    for (const key in aria) setAttribute(parent, key, aria[key]);\n\n    if (!isGroup) {\n      setAttribute(parent, 'pointer-events', events);\n    }\n    setAttribute(parent, 'clip-path',\n      scene.clip ? clip(this, scene, scene.group) : null);\n\n    let sibling = null,\n        i = 0;\n\n    const process = item => {\n      const dirty = this.isDirty(item),\n            node = bind(item, parent, sibling, mdef.tag, svg);\n\n      if (dirty) {\n        this._update(mdef, node, item);\n        if (isGroup) recurse(this, node, item);\n      }\n\n      sibling = node;\n      ++i;\n    };\n\n    if (mdef.nested) {\n      if (scene.items.length) process(scene.items[0]);\n    } else {\n      visit(scene, process);\n    }\n\n    domClear(parent, i);\n    return parent;\n  },\n\n  /**\n   * Update the attributes of an SVG element for a mark item.\n   * @param {object} mdef - The mark definition object\n   * @param {SVGElement} el - The SVG element.\n   * @param {Item} item - The mark item.\n   */\n  _update(mdef, el, item) {\n    // set dom element and values cache\n    // provides access to emit method\n    element = el;\n    values = el.__values__;\n\n    // apply aria-specific properties\n    ariaItemAttributes(emit, item);\n\n    // apply svg attributes\n    mdef.attr(emit, item, this);\n\n    // some marks need special treatment\n    const extra = mark_extras[mdef.type];\n    if (extra) extra.call(this, mdef, el, item);\n\n    // apply svg style attributes\n    // note: element state may have been modified by 'extra' method\n    if (element) this.style(element, item);\n  },\n\n  /**\n   * Update the presentation attributes of an SVG element for a mark item.\n   * @param {SVGElement} el - The SVG element.\n   * @param {Item} item - The mark item.\n   */\n  style(el, item) {\n    if (item == null) return;\n\n    for (const prop in stylesAttr) {\n      let value = prop === 'font' ? fontFamily(item) : item[prop];\n      if (value === values[prop]) continue;\n\n      const name = stylesAttr[prop];\n      if (value == null) {\n        el.removeAttribute(name);\n      } else {\n        if (isGradient(value)) {\n          value = gradientRef(value, this._defs.gradient, href());\n        }\n        el.setAttribute(name, value + '');\n      }\n\n      values[prop] = value;\n    }\n\n    for (const prop in stylesCss) {\n      setStyle(el, stylesCss[prop], item[prop]);\n    }\n  },\n\n  /**\n   * Render SVG defs, as needed.\n   * Must be called *after* marks have been processed to ensure the\n   * collected state is current and accurate.\n   */\n  defs() {\n    const svg = this._svg,\n          defs = this._defs;\n\n    let el = defs.el,\n        index = 0;\n\n    for (const id in defs.gradient) {\n      if (!el) defs.el = (el = domChild(svg, RootIndex + 1, 'defs', svgns));\n      index = updateGradient(el, defs.gradient[id], index);\n    }\n\n    for (const id in defs.clipping) {\n      if (!el) defs.el = (el = domChild(svg, RootIndex + 1, 'defs', svgns));\n      index = updateClipping(el, defs.clipping[id], index);\n    }\n\n    // clean-up\n    if (el) {\n      index === 0\n        ? (svg.removeChild(el), defs.el = null)\n        : domClear(el, index);\n    }\n  },\n\n  /**\n   * Clear defs caches.\n   */\n  _clearDefs() {\n    const def = this._defs;\n    def.gradient = {};\n    def.clipping = {};\n  }\n});\n\n// mark ancestor chain with a dirty id\nfunction dirtyParents(item, id) {\n  for (; item && item.dirty !== id; item=item.mark.group) {\n    item.dirty = id;\n    if (item.mark && item.mark.dirty !== id) {\n      item.mark.dirty = id;\n    } else return;\n  }\n}\n\n// update gradient definitions\nfunction updateGradient(el, grad, index) {\n  let i, n, stop;\n\n  if (grad.gradient === 'radial') {\n    // SVG radial gradients automatically transform to normalized bbox\n    // coordinates, in a way that is cumbersome to replicate in canvas.\n    // We wrap the radial gradient in a pattern element, allowing us to\n    // maintain a circular gradient that matches what canvas provides.\n    let pt = domChild(el, index++, 'pattern', svgns);\n    setAttributes(pt, {\n      id: patternPrefix + grad.id,\n      viewBox: '0,0,1,1',\n      width: '100%',\n      height: '100%',\n      preserveAspectRatio: 'xMidYMid slice'\n    });\n\n    pt = domChild(pt, 0, 'rect', svgns);\n    setAttributes(pt, {\n      width: 1,\n      height: 1,\n      fill: `url(${href()}#${grad.id})`\n    });\n\n    el = domChild(el, index++, 'radialGradient', svgns);\n    setAttributes(el, {\n      id: grad.id,\n      fx: grad.x1,\n      fy: grad.y1,\n      fr: grad.r1,\n      cx: grad.x2,\n      cy: grad.y2,\n      r: grad.r2\n    });\n  } else {\n    el = domChild(el, index++, 'linearGradient', svgns);\n    setAttributes(el, {\n      id: grad.id,\n      x1: grad.x1,\n      x2: grad.x2,\n      y1: grad.y1,\n      y2: grad.y2\n    });\n  }\n\n  for (i=0, n=grad.stops.length; i<n; ++i) {\n    stop = domChild(el, i, 'stop', svgns);\n    stop.setAttribute('offset', grad.stops[i].offset);\n    stop.setAttribute('stop-color', grad.stops[i].color);\n  }\n  domClear(el, i);\n\n  return index;\n}\n\n// update clipping path definitions\nfunction updateClipping(el, clip, index) {\n  let mask;\n\n  el = domChild(el, index, 'clipPath', svgns);\n  el.setAttribute('id', clip.id);\n\n  if (clip.path) {\n    mask = domChild(el, 0, 'path', svgns);\n    mask.setAttribute('d', clip.path);\n  } else {\n    mask = domChild(el, 0, 'rect', svgns);\n    setAttributes(mask, {x: 0, y: 0, width: clip.width, height: clip.height});\n  }\n  domClear(el, 1);\n\n  return index + 1;\n}\n\n// Recursively process group contents.\nfunction recurse(renderer, el, group) {\n  // child 'g' element is second to last among children (path, g, path)\n  // other children here are foreground and background path elements\n  el = el.lastChild.previousSibling;\n  let prev, idx = 0;\n\n  visit(group, item => {\n    prev = renderer.mark(el, item, prev);\n    ++idx;\n  });\n\n  // remove any extraneous DOM elements\n  domClear(el, 1 + idx);\n}\n\n// Bind a scenegraph item to an SVG DOM element.\n// Create new SVG elements as needed.\nfunction bind(item, el, sibling, tag, svg) {\n  let node = item._svg, doc;\n\n  // create a new dom node if needed\n  if (!node) {\n    doc = el.ownerDocument;\n    node = domCreate(doc, tag, svgns);\n    item._svg = node;\n\n    if (item.mark) {\n      node.__data__ = item;\n      node.__values__ = {fill: 'default'};\n\n      // if group, create background, content, and foreground elements\n      if (tag === 'g') {\n        const bg = domCreate(doc, 'path', svgns);\n        node.appendChild(bg);\n        bg.__data__ = item;\n\n        const cg = domCreate(doc, 'g', svgns);\n        node.appendChild(cg);\n        cg.__data__ = item;\n\n        const fg = domCreate(doc, 'path', svgns);\n        node.appendChild(fg);\n        fg.__data__ = item;\n        fg.__values__ = {fill: 'default'};\n      }\n    }\n  }\n\n  // (re-)insert if (a) not contained in SVG or (b) sibling order has changed\n  if (node.ownerSVGElement !== svg || siblingCheck(node, sibling)) {\n    el.insertBefore(node, sibling ? sibling.nextSibling : el.firstChild);\n  }\n\n  return node;\n}\n\n// check if two nodes are ordered siblings\nfunction siblingCheck(node, sibling) {\n  return node.parentNode\n    && node.parentNode.childNodes.length > 1\n    && node.previousSibling != sibling; // treat null/undefined the same\n}\n\n// -- Set attributes & styles on SVG elements ---\n\nlet element = null, // temp var for current SVG element\n    values = null;  // temp var for current values hash\n\n// Extra configuration for certain mark types\nconst mark_extras = {\n  group(mdef, el, item) {\n    const fg = element = el.childNodes[2];\n    values = fg.__values__;\n    mdef.foreground(emit, item, this);\n\n    values = el.__values__; // use parent's values hash\n    element = el.childNodes[1];\n    mdef.content(emit, item, this);\n\n    const bg = element = el.childNodes[0];\n    mdef.background(emit, item, this);\n\n    const value = item.mark.interactive === false ? 'none' : null;\n    if (value !== values.events) {\n      setAttribute(fg, 'pointer-events', value);\n      setAttribute(bg, 'pointer-events', value);\n      values.events = value;\n    }\n\n    if (item.strokeForeground && item.stroke) {\n      const fill = item.fill;\n      setAttribute(fg, 'display', null);\n\n      // set style of background\n      this.style(bg, item);\n      setAttribute(bg, 'stroke', null);\n\n      // set style of foreground\n      if (fill) item.fill = null;\n      values = fg.__values__;\n      this.style(fg, item);\n      if (fill) item.fill = fill;\n\n      // leave element null to prevent downstream styling\n      element = null;\n    } else {\n      // ensure foreground is ignored\n      setAttribute(fg, 'display', 'none');\n    }\n  },\n  image(mdef, el, item) {\n    if (item.smooth === false) {\n      setStyle(el, 'image-rendering', 'optimizeSpeed');\n      setStyle(el, 'image-rendering', 'pixelated');\n    } else {\n      setStyle(el, 'image-rendering', null);\n    }\n  },\n  text(mdef, el, item) {\n    const tl = textLines(item);\n    let key, value, doc, lh;\n\n    if (isArray(tl)) {\n      // multi-line text\n      value = tl.map(_ => textValue(item, _));\n      key = value.join('\\n'); // content cache key\n\n      if (key !== values.text) {\n        domClear(el, 0);\n        doc = el.ownerDocument;\n        lh = lineHeight(item);\n        value.forEach((t, i) => {\n          const ts = domCreate(doc, 'tspan', svgns);\n          ts.__data__ = item; // data binding\n          ts.textContent = t;\n          if (i) {\n            ts.setAttribute('x', 0);\n            ts.setAttribute('dy', lh);\n          }\n          el.appendChild(ts);\n        });\n        values.text = key;\n      }\n    } else {\n      // single-line text\n      value = textValue(item, tl);\n      if (value !== values.text) {\n        el.textContent = value;\n        values.text = value;\n      }\n    }\n\n    setAttribute(el, 'font-family', fontFamily(item));\n    setAttribute(el, 'font-size', fontSize(item) + 'px');\n    setAttribute(el, 'font-style', item.fontStyle);\n    setAttribute(el, 'font-variant', item.fontVariant);\n    setAttribute(el, 'font-weight', item.fontWeight);\n  }\n};\n\nfunction emit(name, value, ns) {\n  // early exit if value is unchanged\n  if (value === values[name]) return;\n\n  // use appropriate method given namespace (ns)\n  if (ns) {\n    setAttributeNS(element, name, value, ns);\n  } else {\n    setAttribute(element, name, value);\n  }\n\n  // note current value for future comparison\n  values[name] = value;\n}\n\nfunction setStyle(el, name, value) {\n  if (value !== values[name]) {\n    if (value == null) {\n      el.style.removeProperty(name);\n    } else {\n      el.style.setProperty(name, value + '');\n    }\n    values[name] = value;\n  }\n}\n\nfunction setAttributes(el, attrs) {\n  for (const key in attrs) {\n    setAttribute(el, key, attrs[key]);\n  }\n}\n\nfunction setAttribute(el, name, value) {\n  if (value != null) {\n    // if value is provided, update DOM attribute\n    el.setAttribute(name, value);\n  } else {\n    // else remove DOM attribute\n    el.removeAttribute(name);\n  }\n}\n\nfunction setAttributeNS(el, name, value, ns) {\n  if (value != null) {\n    // if value is provided, update DOM attribute\n    el.setAttributeNS(ns, name, value);\n  } else {\n    // else remove DOM attribute\n    el.removeAttributeNS(ns, name);\n  }\n}\n\nfunction href() {\n  let loc;\n  return typeof window === 'undefined' ? ''\n    : (loc = window.location).hash ? loc.href.slice(0, -loc.hash.length)\n    : loc.href;\n}\n","import Renderer from './Renderer';\nimport {gradientRef, isGradient, patternPrefix} from './Gradient';\nimport Marks from './marks/index';\nimport {ariaItemAttributes, ariaMarkAttributes} from './util/aria';\nimport {cssClass} from './util/dom';\nimport {markup} from './util/markup';\nimport {fontFamily, fontSize, lineHeight, textLines, textValue} from './util/text';\nimport {visit} from './util/visit';\nimport clip from './util/svg/clip';\nimport metadata from './util/svg/metadata';\nimport {rootAttributes, stylesAttr, stylesCss} from './util/svg/styles';\nimport {extend, inherits, isArray} from 'vega-util';\n\nexport default function SVGStringRenderer(loader) {\n  Renderer.call(this, loader);\n  this._text = null;\n  this._defs = {\n    gradient: {},\n    clipping: {}\n  };\n}\n\ninherits(SVGStringRenderer, Renderer, {\n  /**\n   * Returns the rendered SVG text string,\n   * or null if rendering has not yet occurred.\n   */\n  svg() {\n    return this._text;\n  },\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   */\n  _render(scene) {\n    const m = markup();\n\n    // svg tag\n    m.open('svg', extend({}, metadata, {\n      class:   'marks',\n      width:   this._width * this._scale,\n      height:  this._height * this._scale,\n      viewBox: `0 0 ${this._width} ${this._height}`\n    }));\n\n    // background, if defined\n    const bg = this._bgcolor;\n    if (bg && bg !== 'transparent' && bg !== 'none') {\n      m.open('rect', {\n        width:  this._width,\n        height: this._height,\n        fill:   bg\n      }).close();\n    }\n\n    // root content group\n    m.open('g', rootAttributes, {\n      transform: 'translate(' + this._origin + ')'\n    });\n    this.mark(m, scene);\n    m.close(); // </g>\n\n    // defs\n    this.defs(m);\n\n    // get SVG text string\n    this._text = m.close() + '';\n\n    return this;\n  },\n\n  /**\n   * Render a set of mark items.\n   * @param {object} m - The markup context.\n   * @param {object} scene - The mark parent to render.\n   */\n  mark(m, scene) {\n    const mdef = Marks[scene.marktype],\n          tag  = mdef.tag,\n          attrList = [ariaItemAttributes, mdef.attr];\n\n    // render opening group tag\n    m.open('g',\n      {\n        'class': cssClass(scene),\n        'clip-path': scene.clip ? clip(this, scene, scene.group) : null\n      },\n      ariaMarkAttributes(scene),\n      {\n        'pointer-events': tag !== 'g' && scene.interactive === false ? 'none' : null\n      }\n    );\n\n    // render contained elements\n    const process = item => {\n      const href = this.href(item);\n      if (href) m.open('a', href);\n\n      m.open(\n        tag,\n        this.attr(scene, item, attrList, tag !== 'g' ? tag : null)\n      );\n\n      if (tag === 'text') {\n        const tl = textLines(item);\n        if (isArray(tl)) {\n          // multi-line text\n          const attrs = {x: 0, dy: lineHeight(item)};\n          for (let i=0; i<tl.length; ++i) {\n            m.open('tspan', i ? attrs: null)\n              .text(textValue(item, tl[i]))\n              .close();\n          }\n        } else {\n          // single-line text\n          m.text(textValue(item, tl));\n        }\n      } else if (tag === 'g') {\n        const fore = item.strokeForeground,\n              fill = item.fill,\n              stroke = item.stroke;\n\n        if (fore && stroke) {\n          item.stroke = null;\n        }\n\n        m.open(\n          'path',\n          this.attr(scene, item, mdef.background, 'bgrect')\n        ).close();\n\n        // recurse for group content\n        m.open('g', this.attr(scene, item, mdef.content));\n        visit(item, scene => this.mark(m, scene));\n        m.close();\n\n        if (fore && stroke) {\n          if (fill) item.fill = null;\n          item.stroke = stroke;\n\n          m.open(\n            'path',\n            this.attr(scene, item, mdef.foreground, 'bgrect')\n          ).close();\n\n          if (fill) item.fill = fill;\n        } else {\n          m.open(\n            'path',\n            this.attr(scene, item, mdef.foreground, 'bgfore')\n          ).close();\n        }\n      }\n\n      m.close(); // </tag>\n      if (href) m.close(); // </a>\n    };\n\n    if (mdef.nested) {\n      if (scene.items && scene.items.length) process(scene.items[0]);\n    } else {\n      visit(scene, process);\n    }\n\n    // render closing group tag\n    return m.close(); // </g>\n  },\n\n  /**\n   * Get href attributes for a hyperlinked mark item.\n   * @param {Item} item - The mark item.\n   */\n  href(item) {\n    const href = item.href;\n    let attr;\n\n    if (href) {\n      if (attr = this._hrefs && this._hrefs[href]) {\n        return attr;\n      } else {\n        this.sanitizeURL(href).then(attr => {\n          // rewrite to use xlink namespace\n          attr['xlink:href'] = attr.href;\n          attr.href = null;\n          (this._hrefs || (this._hrefs = {}))[href] = attr;\n        });\n      }\n    }\n    return null;\n  },\n\n  /**\n   * Get an object of SVG attributes for a mark item.\n   * @param {object} scene - The mark parent.\n   * @param {Item} item - The mark item.\n   * @param {array|function} attrs - One or more attribute emitters.\n   * @param {string} tag - The tag being rendered.\n   */\n  attr(scene, item, attrs, tag) {\n    const object = {},\n          emit = (name, value, ns, prefixed) => {\n            object[prefixed || name] = value;\n          };\n\n    // apply mark specific attributes\n    if (Array.isArray(attrs)) {\n      attrs.forEach(fn => fn(emit, item, this));\n    } else {\n      attrs(emit, item, this);\n    }\n\n    // apply style attributes\n    if (tag) {\n      style(object, item, scene, tag, this._defs);\n    }\n\n    return object;\n  },\n\n  /**\n   * Render SVG defs, as needed.\n   * Must be called *after* marks have been processed to ensure the\n   * collected state is current and accurate.\n   * @param {object} m - The markup context.\n   */\n  defs(m) {\n    const gradient = this._defs.gradient,\n          clipping = this._defs.clipping,\n          count = Object.keys(gradient).length + Object.keys(clipping).length;\n\n    if (count === 0) return; // nothing to do\n\n    m.open('defs');\n\n    for (const id in gradient) {\n      const def = gradient[id],\n            stops = def.stops;\n\n      if (def.gradient === 'radial') {\n        // SVG radial gradients automatically transform to normalized bbox\n        // coordinates, in a way that is cumbersome to replicate in canvas.\n        // We wrap the radial gradient in a pattern element, allowing us to\n        // maintain a circular gradient that matches what canvas provides.\n\n        m.open('pattern', {\n          id: patternPrefix + id,\n          viewBox: '0,0,1,1',\n          width: '100%',\n          height: '100%',\n          preserveAspectRatio: 'xMidYMid slice'\n        });\n\n        m.open('rect', {\n          width:  '1',\n          height: '1',\n          fill:   'url(#' + id + ')'\n        }).close();\n\n        m.close(); // </pattern>\n\n        m.open('radialGradient', {\n          id: id,\n          fx: def.x1,\n          fy: def.y1,\n          fr: def.r1,\n          cx: def.x2,\n          cy: def.y2,\n          r: def.r2\n        });\n      } else {\n        m.open('linearGradient', {\n          id: id,\n          x1: def.x1,\n          x2: def.x2,\n          y1: def.y1,\n          y2: def.y2\n        });\n      }\n\n      for (let i = 0; i < stops.length; ++i) {\n        m.open('stop', {\n          offset: stops[i].offset,\n          'stop-color': stops[i].color\n        }).close();\n      }\n\n      m.close();\n    }\n\n    for (const id in clipping) {\n      const def = clipping[id];\n\n      m.open('clipPath', {id: id});\n      if (def.path) {\n        m.open('path', {\n          d: def.path\n        }).close();\n      } else {\n        m.open('rect', {\n          x: 0,\n          y: 0,\n          width: def.width,\n          height: def.height\n        }).close();\n      }\n      m.close();\n    }\n\n    m.close();\n  }\n});\n\n// Helper function for attr for style presentation attributes\nfunction style(s, item, scene, tag, defs) {\n  let styleList;\n  if (item == null) return s;\n\n  if (tag === 'bgrect' && scene.interactive === false) {\n    s['pointer-events'] = 'none';\n  }\n\n  if (tag === 'bgfore') {\n    if (scene.interactive === false) {\n      s['pointer-events'] = 'none';\n    }\n    s.display = 'none';\n    if (item.fill !== null) return s;\n  }\n\n  if (tag === 'image' && item.smooth === false) {\n    styleList = [\n      'image-rendering: optimizeSpeed;',\n      'image-rendering: pixelated;'\n    ];\n  }\n\n  if (tag === 'text') {\n    s['font-family'] = fontFamily(item);\n    s['font-size'] = fontSize(item) + 'px';\n    s['font-style'] = item.fontStyle;\n    s['font-variant'] = item.fontVariant;\n    s['font-weight'] = item.fontWeight;\n  }\n\n  for (const prop in stylesAttr) {\n    let value = item[prop];\n    const name = stylesAttr[prop];\n\n    if (value === 'transparent' && (name === 'fill' || name === 'stroke')) {\n      // transparent is not a legal SVG value\n      // we can skip it to rely on default 'none' instead\n    } else if (value != null) {\n      if (isGradient(value)) {\n        value = gradientRef(value, defs.gradient, '');\n      }\n      s[name] = value;\n    }\n  }\n\n  for (const prop in stylesCss) {\n    const value = item[prop];\n    if (value != null) {\n      styleList = styleList || [];\n      styleList.push(`${stylesCss[prop]}: ${value};`);\n    }\n  }\n  if (styleList) {\n    s.style = styleList.join(' ');\n  }\n\n  return s;\n}\n","import CanvasHandler from './CanvasHandler';\nimport CanvasRenderer from './CanvasRenderer';\nimport SVGHandler from './SVGHandler';\nimport SVGRenderer from './SVGRenderer';\nimport SVGStringRenderer from './SVGStringRenderer';\n\nconst Canvas = 'canvas';\nconst PNG = 'png';\nconst SVG = 'svg';\nconst None = 'none';\n\nexport const RenderType = {\n  Canvas: Canvas,\n  PNG:    PNG,\n  SVG:    SVG,\n  None:   None\n};\n\nconst modules = {};\n\nmodules[Canvas] = modules[PNG] = {\n  renderer: CanvasRenderer,\n  headless: CanvasRenderer,\n  handler:  CanvasHandler\n};\n\nmodules[SVG] = {\n  renderer: SVGRenderer,\n  headless: SVGStringRenderer,\n  handler:  SVGHandler\n};\n\nmodules[None] = {};\n\nexport function renderModule(name, _) {\n  name = String(name || '').toLowerCase();\n  if (arguments.length > 1) {\n    modules[name] = _;\n    return this;\n  } else {\n    return modules[name];\n  }\n}\n","import Marks from './marks/index';\nimport {error} from 'vega-util';\nimport Bounds from './Bounds';\n\nexport function intersect(scene, bounds, filter) {\n  const hits = [], // intersection results\n        box = new Bounds().union(bounds), // defensive copy\n        type = scene.marktype;\n\n  return type ? intersectMark(scene, box, filter, hits)\n    : type === 'group' ? intersectGroup(scene, box, filter, hits)\n    : error('Intersect scene must be mark node or group item.');\n}\n\nfunction intersectMark(mark, box, filter, hits) {\n  if (visitMark(mark, box, filter)) {\n    const items = mark.items,\n          type = mark.marktype,\n          n = items.length;\n\n    let i = 0;\n\n    if (type === 'group') {\n      for (; i<n; ++i) {\n        intersectGroup(items[i], box, filter, hits);\n      }\n    } else {\n      for (const test = Marks[type].isect; i<n; ++i) {\n        const item = items[i];\n        if (intersectItem(item, box, test)) hits.push(item);\n      }\n    }\n  }\n  return hits;\n}\n\nfunction visitMark(mark, box, filter) {\n  // process if bounds intersect and if\n  // (1) mark is a group mark (so we must recurse), or\n  // (2) mark is interactive and passes filter\n  return mark.bounds && box.intersects(mark.bounds) && (\n    mark.marktype === 'group' ||\n    mark.interactive !== false && (!filter || filter(mark))\n  );\n}\n\nfunction intersectGroup(group, box, filter, hits) {\n  // test intersect against group\n  // skip groups by default unless filter says otherwise\n  if ((filter && filter(group.mark)) &&\n      intersectItem(group, box, Marks.group.isect)) {\n    hits.push(group);\n  }\n\n  // recursively test children marks\n  // translate box to group coordinate space\n  const marks = group.items,\n        n = marks && marks.length;\n\n  if (n) {\n    const x = group.x || 0,\n          y = group.y || 0;\n    box.translate(-x, -y);\n    for (let i=0; i<n; ++i) {\n      intersectMark(marks[i], box, filter, hits);\n    }\n    box.translate(x, y);\n  }\n\n  return hits;\n}\n\nfunction intersectItem(item, box, test) {\n  // test bounds enclosure, bounds intersection, then detailed test\n  const bounds = item.bounds;\n  return box.encloses(bounds) || (box.intersects(bounds) && test(item, box));\n}\n\n","import Bounds from '../Bounds';\nimport boundContext from './boundContext';\nimport {isFunction} from 'vega-util';\n\nconst clipBounds = new Bounds();\n\nexport default function(mark) {\n  const clip = mark.clip;\n\n  if (isFunction(clip)) {\n    clip(boundContext(clipBounds.clear()));\n  } else if (clip) {\n    clipBounds.set(0, 0, mark.group.width, mark.group.height);\n  } else return;\n\n  mark.bounds.intersect(clipBounds);\n}\n","import pathParse from '../path/parse';\nimport {isNumber, isObject} from 'vega-util';\n\nconst TOLERANCE = 1e-9;\n\nexport function sceneEqual(a, b, key) {\n  return (a === b) ? true\n    : (key === 'path') ? pathEqual(a, b)\n    : (a instanceof Date && b instanceof Date) ? +a === +b\n    : (isNumber(a) && isNumber(b)) ? Math.abs(a - b) <= TOLERANCE\n    : (!a || !b || !isObject(a) && !isObject(b)) ? a == b\n    : objectEqual(a, b);\n}\n\nexport function pathEqual(a, b) {\n  return sceneEqual(pathParse(a), pathParse(b));\n}\n\nfunction objectEqual(a, b) {\n  var ka = Object.keys(a),\n      kb = Object.keys(b),\n      key, i;\n\n  if (ka.length !== kb.length) return false;\n\n  ka.sort();\n  kb.sort();\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) return false;\n  }\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!sceneEqual(a[key], b[key], key)) return false;\n  }\n\n  return typeof a === typeof b;\n}\n","import {resetSVGGradientId} from './src/Gradient';\nimport {resetSVGClipId} from './src/util/svg/clip';\n\nexport {default as Bounds} from './src/Bounds';\nexport {default as Gradient} from './src/Gradient';\nexport {default as GroupItem} from './src/GroupItem';\nexport {default as ResourceLoader} from './src/ResourceLoader';\nexport {default as Item} from './src/Item';\nexport {default as Scenegraph} from './src/Scenegraph';\n\nexport {default as Handler} from './src/Handler';\nexport {default as Renderer} from './src/Renderer';\nexport {default as CanvasHandler} from './src/CanvasHandler';\nexport {default as CanvasRenderer} from './src/CanvasRenderer';\nexport {default as SVGHandler} from './src/SVGHandler';\nexport {default as SVGRenderer} from './src/SVGRenderer';\nexport {default as SVGStringRenderer} from './src/SVGStringRenderer';\nexport {RenderType, renderModule} from './src/modules';\nexport {intersect} from './src/intersect';\n\nexport {default as Marks} from './src/marks/index';\n\nexport {default as boundClip} from './src/bound/boundClip';\nexport {default as boundContext} from './src/bound/boundContext';\nexport {default as boundStroke} from './src/bound/boundStroke';\nexport {default as boundItem} from './src/bound/boundItem';\nexport {default as boundMark} from './src/bound/boundMark';\n\nexport {default as pathCurves} from './src/path/curves';\nexport {default as pathSymbols} from './src/path/symbols';\nexport {default as pathRectangle} from './src/path/rectangle';\nexport {default as pathTrail} from './src/path/trail';\nexport {default as pathParse} from './src/path/parse';\nexport {default as pathRender} from './src/path/render';\n\nexport {default as point} from './src/util/point';\nexport {domCreate, domFind, domChild, domClear} from './src/util/dom';\nexport {markup, serializeXML} from './src/util/markup';\nexport {\n  font,\n  fontFamily,\n  fontSize,\n  lineHeight,\n  multiLineOffset,\n  textMetrics\n} from './src/util/text';\n\nexport {sceneEqual, pathEqual} from './src/util/equal';\nexport {sceneToJSON, sceneFromJSON} from './src/util/serialize';\nexport {\n  intersectPath,\n  intersectPoint,\n  intersectRule,\n  intersectBoxLine\n} from './src/util/intersect';\nexport {\n  zorder as sceneZOrder,\n  visit as sceneVisit,\n  pickVisit as scenePickVisit\n} from './src/util/visit';\n\n// for testing purposes\nexport {path} from 'd3-path';\n\n// deprecated, remove in next major version\nexport {resetSVGClipId} from './src/util/svg/clip';\n\nexport function resetSVGDefIds() {\n  resetSVGClipId();\n  resetSVGGradientId();\n}\n"],"names":["gradient_id","patternPrefix","isGradient","value","gradient","gradientRef","g","defs","base","type","id","prefix","x1","get","y1","r1","x2","y2","r2","val","def","lookup","basis","curve","curveBasis","curveBasisClosed","curveBasisOpen","bundle","curveBundle","tension","cardinal","curveCardinal","curveCardinalOpen","curveCardinalClosed","curveCatmullRom","curveCatmullRomClosed","curveCatmullRomOpen","linear","curveLinear","curveLinearClosed","monotone","horizontal","curveMonotoneY","vertical","curveMonotoneX","natural","curveNatural","step","curveStep","curveStepAfter","curveStepBefore","curves","orientation","entry","hasOwnProperty","paramCounts","m","l","h","v","z","c","s","q","t","a","commandPattern","numberPattern","spacePattern","flagPattern","parse","path","commands","match","forEach","str","cmd","toLowerCase","paramCount","params","segment","index","length","i","pattern","slice","Error","push","ws","parseParams","trim","count","DegToRad","Math","PI","HalfPi","Tau","HalfSqrt3","sqrt","segmentCache","bezierCache","join","bezier","key","call","cx","cy","th0","th1","rx","ry","sin_th","cos_th","a00","a01","a10","a11","cos_th0","cos","sin_th0","sin","cos_th1","sin_th1","th_half","sin_th_h2","x3","y3","temp","scale","current","sX","sY","n","pathRender","context","tempX","tempY","tempControlX","tempControlY","previous","x","y","controlX","controlY","anchorX","anchorY","beginPath","len","lineTo","moveTo","bezierCurveTo","quadraticCurveTo","drawArc","closePath","coords","seg","large","sweep","rotateX","ox","oy","arguments","th","px","py","pl","abs","x0","y0","sfactor_sq","sfactor","xc","yc","atan2","th_arc","segs","ceil","result","th2","th3","segments","bez","Tan30","builtins","circle","draw","size","r","arc","cross","diamond","square","w","rect","arrow","wedge","o","b","triangle","stroke","symbols","_","custom","parsed","pathParse","customSymbol","C","rectangleX","d","rectangleY","rectangleWidth","width","rectangleHeight","height","number","clamp","min","max","vg_rect","crTL","crTR","crBL","crBR","rectangle","buffer","this","tl","tr","bl","br","cornerRadius","vg_trail","defined","ready","point","w2","ux","uy","ud","trail","data","defined0","item","arcShape","d3_arc","startAngle","endAngle","padAngle","innerRadius","outerRadius","areavShape","d3_area","area","areahShape","lineShape","d3_line","rectShape","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomRight","cornerRadiusBottomLeft","symbolShape","d3_symbol","symbol","shape","trailShape","hasCornerRadius","clip_id","resetSVGClipId","clip$1","renderer","clip","_defs","clipping","isFunction","Bounds","clear","union","Item","mark","bounds","GroupItem","items","ResourceLoader","customLoader","_pending","_loader","loader","increment","decrement","boundStroke","miter","opacity","strokeOpacity","sw","strokeWidth","expand","strokeJoin","miterAdjustment","prototype","clone","Number","MAX_VALUE","empty","equals","set","add","round","floor","translate","dx","dy","rotate","angle","p","rotatedPoints","intersect","encloses","alignsWith","intersects","contains","inherits","pending","sanitizeURL","uri","sanitize","then","opt","catch","loadImage","Image","image","url","href","img","cors","crossOrigin","onload","onerror","src","e","complete","Promise","accept","poll","setTimeout","circleThreshold","lx","ly","rot","ma","mb","mc","md","addL","addX","addY","addp","addpL","boundContext","deg","px1","py1","px2","py2","quadExtrema","px3","py3","cubicExtrema","sa","ea","ccw","update","cb","t0","t1","cubic","s2","t2","canvas","getContext","intersectPath","brush","isPointInPath","intersectPoint","box","intersectRect","intersectRule","intersectBoxLine","u","blend","globalCompositeOperation","dflt","addStops","stops","addColorStop","offset","color","spec","createRadialGradient","ictx","fillStyle","createLinearGradient","fillRect","createPattern","fill","fillOpacity","globalAlpha","Empty","lw","strokeStyle","lineWidth","lineCap","strokeCap","lineJoin","miterLimit","strokeMiterLimit","setLineDash","strokeDash","lineDashOffset","strokeDashOffset","compare","zindex","zorder","scene","zdirty","zitems","output","sort","visit","visitor","pickVisit","hit","drawAll","drawPath","drawOne","pick","test","truthy","gx","gy","pixelRatio","hitPath","filled","lc","Array","isArray","isPointInStroke","pickPath","translateItem","markItemPath","isect","tag","nested","attr","emit","rotateItem","bound","markMultiItemPath","tip","interp","interpolate","orient","Infinity","clipGroup","group","strokeOffset","emitRectangle","off","rectanglePath","hitBackground","hitForeground","hitCorner","j","noBound","fore","strokeForeground","save","restore","dw","dh","ix","interactive","marktype","pickMark","content","background","foreground","metadata","xmlns","version","getImage","imageWidth","aspect","imageHeight","imageXOffset","align","imageYOffset","baseline","toDataURL","ar0","ar1","imageSmoothingEnabled","smooth","drawImage","xOffset","yOffset","line","pow","sx","scaleX","sy","scaleY","cache","pathCache","path$2","transformItem","rule","widthCache","lruCache","textMetrics","fontSize","measureWidth","estimateWidth","useCanvas","use","text","_estimateWidth","textValue","currentFontHeight","_measureWidth","font","currentFont","concat","undefined","measureText","lineHeight","textLines","lineBreak","split","limit","widthGetter","mid","ellipsis","rtl","dir","lo","hi","truncate","fontFamily","quote","String","replace","fontStyle","fontVariant","fontWeight","textAlign","left","center","right","tempBounds","anchorPoint","radius","theta","mode","reduce","lh","fillText","strokeText","ax","ay","Marks","boundItem","func","marks","DUMMY","boundMark","hasItems","keys","sceneToJSON","indent","JSON","stringify","sceneFromJSON","json","initialize","parent","Scenegraph","root","createMark","name","role","aria","description","domCreate","doc","ns","document","createElement","createElementNS","domFind","el","nodes","childNodes","tagName","domChild","ownerDocument","insertBefore","domClear","curr","removeChild","cssClass","event","getBoundingClientRect","clientX","clientLeft","clientWidth","clientY","top","clientTop","clientHeight","Handler","customTooltip","_active","_handlers","_tooltip","defaultTooltip","handler","element","setAttribute","Renderer","_el","_bgcolor","toJSON","markdef","origin","obj","_obj","firstChild","_origin","_scene","on","_handlerIndex","handlers","eventName","k","indexOf","handleHref","MouseEvent","dispatchEvent","handleTooltip","show","tooltip","mdef","resolveItem","getItemBoundingClientRect","bottom","scaleFactor","resize","bgcolor","_width","_height","_scale","dirty","render","_call","_render","renderAsync","_ready","resolve","_load","method","redraw","DragEnterEvent","DragLeaveEvent","DragOverEvent","MouseDownEvent","MouseMoveEvent","MouseOutEvent","MouseOverEvent","ClickEvent","MouseWheelEvent","TouchStartEvent","TouchMoveEvent","TouchEndEvent","Events","TooltipShowEvent","TooltipHideEvent","HrefEvent","CanvasHandler","_down","_touch","_first","_events","eventListenerCheck","eventBundle","addEventListener","evt","fire","move","moveEvent","overEvent","outEvent","pickEvent","exit","inactive","_canvas","events","DOMMouseScroll","mousemove","dragover","mouseout","dragleave","mousedown","click","touchstart","changedTouches","touchmove","touchend","touch","vegaType","splice","window","devicePixelRatio","CanvasRenderer","_options","_redraw","_dirty","_tempb","SVGHandler","_hrefHandler","listener","_tooltipHandler","options","externalContext","appendChild","inDOM","HTMLElement","parentNode","ratio","style","setTransform","ctx","error","db","vb","clipToBounds","clearRect","target","__data__","svg","_svg","removeEventListener","ARIA_HIDDEN","ARIA_LABEL","ARIA_ROLE","ARIA_ROLEDESCRIPTION","GRAPHICS_OBJECT","GRAPHICS_SYMBOL","roledesc","label","AriaIgnore","toSet","AriaGuides","axis","desc","caption","datum","title","extractTitle","scales","locale","dataflow","isDiscrete","domainCaption","legend","props","Object","toUpperCase","channelCaption","map","peek","titleCaption","AriaEncode","ariaRole","ariaRoleDescription","ariaItemAttributes","hide","prop","ariaMarkAttributes","err","ariaGuide","recurse","some","ariaMark","array","innerText","markup","buf","outer","inner","stack","open","_len","attrs","_key","close","pop","toString","serializeXML","node","_serialize","hasAttributes","attributes","hasChildNodes","children","child","nodeType","nodeValue","stylesAttr","stylesCss","rootAttributes","svgns","SVGRenderer","_dirtyID","_root","dirtyParents","updateGradient","grad","stop","pt","setAttributes","viewBox","preserveAspectRatio","fx","fy","fr","updateClipping","mask","bind","sibling","__values__","bg","cg","fg","ownerSVGElement","previousSibling","siblingCheck","nextSibling","_clearDefs","setAttributeNS","RootIndex","setProperty","apply","removeAttribute","_dirtyCheck","_dirtyAll","isDirty","_update","prev","isGroup","process","lastChild","idx","values","extra","mark_extras","setStyle","ts","textContent","removeAttributeNS","removeProperty","loc","location","hash","SVGStringRenderer","_text","extend","class","transform","attrList","_hrefs","object","prefixed","fn","styleList","display","Canvas","None","RenderType","PNG","SVG","modules","intersectMark","filter","hits","visitMark","intersectGroup","intersectItem","headless","clipBounds","sceneEqual","pathEqual","Date","isNumber","isObject","ka","kb","objectEqual","p0","p1"],"mappings":"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"}